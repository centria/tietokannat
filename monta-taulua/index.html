<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="generator" content="Gatsby 3.14.6"/><link rel="icon" href="/tietokannat/favicon-32x32.png?v=dd253edc615d56282c5dcdfb24ca4261" type="image/png"/><link rel="manifest" href="/tietokannat/manifest.webmanifest" crossorigin="anonymous"/><meta name="theme-color" content="#a2466c"/><link rel="apple-touch-icon" sizes="48x48" href="/tietokannat/icons/icon-48x48.png?v=dd253edc615d56282c5dcdfb24ca4261"/><link rel="apple-touch-icon" sizes="72x72" href="/tietokannat/icons/icon-72x72.png?v=dd253edc615d56282c5dcdfb24ca4261"/><link rel="apple-touch-icon" sizes="96x96" href="/tietokannat/icons/icon-96x96.png?v=dd253edc615d56282c5dcdfb24ca4261"/><link rel="apple-touch-icon" sizes="144x144" href="/tietokannat/icons/icon-144x144.png?v=dd253edc615d56282c5dcdfb24ca4261"/><link rel="apple-touch-icon" sizes="192x192" href="/tietokannat/icons/icon-192x192.png?v=dd253edc615d56282c5dcdfb24ca4261"/><link rel="apple-touch-icon" sizes="256x256" href="/tietokannat/icons/icon-256x256.png?v=dd253edc615d56282c5dcdfb24ca4261"/><link rel="apple-touch-icon" sizes="384x384" href="/tietokannat/icons/icon-384x384.png?v=dd253edc615d56282c5dcdfb24ca4261"/><link rel="apple-touch-icon" sizes="512x512" href="/tietokannat/icons/icon-512x512.png?v=dd253edc615d56282c5dcdfb24ca4261"/><title data-react-helmet="true">Monta taulua</title><style>.gatsby-image-wrapper{position:relative;overflow:hidden}.gatsby-image-wrapper img{bottom:0;height:100%;left:0;margin:0;max-width:none;padding:0;position:absolute;right:0;top:0;width:100%;object-fit:cover}.gatsby-image-wrapper [data-main-image]{opacity:0;transform:translateZ(0);transition:opacity .25s linear;will-change:opacity}.gatsby-image-wrapper-constrained{display:inline-block;vertical-align:top}</style><noscript><style>.gatsby-image-wrapper noscript [data-main-image]{opacity:1!important}.gatsby-image-wrapper [data-placeholder-image]{opacity:0!important}</style></noscript><script type="module">const e="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;e&&document.body.addEventListener("load",(function(e){if(void 0===e.target.dataset.mainImage)return;if(void 0===e.target.dataset.gatsbyImageSsr)return;const t=e.target;let a=null,n=t;for(;null===a&&n;)void 0!==n.parentNode.dataset.gatsbyImageWrapper&&(a=n.parentNode),n=n.parentNode;const o=a.querySelector("[data-placeholder-image]"),r=new Image;r.src=t.currentSrc,r.decode().catch((()=>{})).then((()=>{t.style.opacity=1,o&&(o.style.opacity=0,o.style.transition="opacity 500ms linear")}))}),!0);</script><link as="script" rel="preload" href="/tietokannat/webpack-runtime-3a0255c245ffc5167309.js"/><link as="script" rel="preload" href="/tietokannat/framework-d79a9ccabaa25efea902.js"/><link as="script" rel="preload" href="/tietokannat/app-5c8ce36b7ca7ddadeb9f.js"/><link as="script" rel="preload" href="/tietokannat/commons-18bdf9bc0a4174f228aa.js"/><link as="script" rel="preload" href="/tietokannat/component---src-templates-docs-js-7a892bb90a0bfa08d7aa.js"/><link as="fetch" rel="preload" href="/tietokannat/page-data/monta-taulua/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/tietokannat/page-data/sq/d/1885717130.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/tietokannat/page-data/sq/d/1950529541.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/tietokannat/page-data/sq/d/2744905544.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/tietokannat/page-data/sq/d/3020054368.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/tietokannat/page-data/app-data.json" crossorigin="anonymous"/></head><body><script>(function() { try {
  var mode = localStorage.getItem('theme-ui-color-mode');
  if (!mode) return
  document.documentElement.classList.add('theme-ui-' + mode);
} catch (e) {} })();</script><div id="___gatsby"><style data-emotion="css-global xghfnh">html{--theme-ui-colors-header:#fff;--theme-ui-colors-text:#000;--theme-ui-colors-primary:#E10E49;--theme-ui-colors-secondary:#c70d3a;--theme-ui-colors-highlight:#efeffe;--theme-ui-colors-exercise:#3333ee;--theme-ui-colors-sidebar:#f8f5f1;--theme-ui-colors-background:#fff;--theme-ui-colors-borderColor:rgba(0, 0, 0, 0.15);--theme-ui-colors-footer:#E10E49;color:var(--theme-ui-colors-text);background-color:var(--theme-ui-colors-background);}</style><style data-emotion="css-global dcnl1w">*{box-sizing:border-box;}html{font-family:-apple-system,BlinkMacSystemFont,San Francisco,Helvetica Neue,Helvetica,Ubuntu,Roboto,Noto,Segoe UI,Arial,sans-serif;line-height:1.5;font-weight:400;}html h1{font-family:-apple-system,BlinkMacSystemFont,San Francisco,Helvetica Neue,Helvetica,Ubuntu,Roboto,Noto,Segoe UI,Arial,sans-serif;line-height:1.125;font-weight:700;margin-top:0;margin-bottom:16px;font-size:36px;}html h1::before{content:" ";display:block;padding-top:30px;margin-bottom:40px;border-bottom:1px solid;border-bottom-color:var(--theme-ui-colors-borderColor);}html h2{font-family:-apple-system,BlinkMacSystemFont,San Francisco,Helvetica Neue,Helvetica,Ubuntu,Roboto,Noto,Segoe UI,Arial,sans-serif;line-height:1.125;font-weight:700;margin-top:0;margin-bottom:16px;font-size:28px;}html h2::before{content:" ";display:block;padding-top:30px;margin-bottom:40px;border-bottom:1px solid;border-bottom-color:var(--theme-ui-colors-borderColor);}html h3{font-family:-apple-system,BlinkMacSystemFont,San Francisco,Helvetica Neue,Helvetica,Ubuntu,Roboto,Noto,Segoe UI,Arial,sans-serif;line-height:1.125;font-weight:700;margin-top:0;margin-bottom:16px;font-size:24px;}html h3::before{content:" ";display:block;padding-top:30px;margin-bottom:40px;border-bottom:1px solid;border-bottom-color:var(--theme-ui-colors-borderColor);}html h4{font-family:-apple-system,BlinkMacSystemFont,San Francisco,Helvetica Neue,Helvetica,Ubuntu,Roboto,Noto,Segoe UI,Arial,sans-serif;line-height:1.125;font-weight:700;margin-top:0;margin-bottom:16px;font-size:16px;}html h4::before{content:" ";display:block;padding-top:30px;margin-bottom:40px;border-bottom:1px solid;border-bottom-color:var(--theme-ui-colors-borderColor);}html h5{font-family:-apple-system,BlinkMacSystemFont,San Francisco,Helvetica Neue,Helvetica,Ubuntu,Roboto,Noto,Segoe UI,Arial,sans-serif;line-height:1.125;font-weight:700;margin-top:0;margin-bottom:16px;font-size:14px;}html h5::before{content:" ";display:block;padding-top:30px;margin-bottom:40px;border-bottom:1px solid;border-bottom-color:var(--theme-ui-colors-borderColor);}html h6{font-family:-apple-system,BlinkMacSystemFont,San Francisco,Helvetica Neue,Helvetica,Ubuntu,Roboto,Noto,Segoe UI,Arial,sans-serif;line-height:1.125;font-weight:700;margin-top:0;margin-bottom:16px;font-size:12px;}html h6::before{content:" ";display:block;padding-top:30px;margin-bottom:40px;border-bottom:1px solid;border-bottom-color:var(--theme-ui-colors-borderColor);}body{margin:0;}</style><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><style data-emotion="css ylfa0c">.css-ylfa0c{font-family:-apple-system,BlinkMacSystemFont,San Francisco,Helvetica Neue,Helvetica,Ubuntu,Roboto,Noto,Segoe UI,Arial,sans-serif;line-height:1.5;font-weight:400;}.css-ylfa0c h1{font-family:-apple-system,BlinkMacSystemFont,San Francisco,Helvetica Neue,Helvetica,Ubuntu,Roboto,Noto,Segoe UI,Arial,sans-serif;line-height:1.125;font-weight:700;margin-top:0;margin-bottom:16px;font-size:36px;}.css-ylfa0c h1::before{content:" ";display:block;padding-top:30px;margin-bottom:40px;border-bottom:1px solid;border-bottom-color:var(--theme-ui-colors-borderColor);}.css-ylfa0c h2{font-family:-apple-system,BlinkMacSystemFont,San Francisco,Helvetica Neue,Helvetica,Ubuntu,Roboto,Noto,Segoe UI,Arial,sans-serif;line-height:1.125;font-weight:700;margin-top:0;margin-bottom:16px;font-size:28px;}.css-ylfa0c h2::before{content:" ";display:block;padding-top:30px;margin-bottom:40px;border-bottom:1px solid;border-bottom-color:var(--theme-ui-colors-borderColor);}.css-ylfa0c h3{font-family:-apple-system,BlinkMacSystemFont,San Francisco,Helvetica Neue,Helvetica,Ubuntu,Roboto,Noto,Segoe UI,Arial,sans-serif;line-height:1.125;font-weight:700;margin-top:0;margin-bottom:16px;font-size:24px;}.css-ylfa0c h3::before{content:" ";display:block;padding-top:30px;margin-bottom:40px;border-bottom:1px solid;border-bottom-color:var(--theme-ui-colors-borderColor);}.css-ylfa0c h4{font-family:-apple-system,BlinkMacSystemFont,San Francisco,Helvetica Neue,Helvetica,Ubuntu,Roboto,Noto,Segoe UI,Arial,sans-serif;line-height:1.125;font-weight:700;margin-top:0;margin-bottom:16px;font-size:16px;}.css-ylfa0c h4::before{content:" ";display:block;padding-top:30px;margin-bottom:40px;border-bottom:1px solid;border-bottom-color:var(--theme-ui-colors-borderColor);}.css-ylfa0c h5{font-family:-apple-system,BlinkMacSystemFont,San Francisco,Helvetica Neue,Helvetica,Ubuntu,Roboto,Noto,Segoe UI,Arial,sans-serif;line-height:1.125;font-weight:700;margin-top:0;margin-bottom:16px;font-size:14px;}.css-ylfa0c h5::before{content:" ";display:block;padding-top:30px;margin-bottom:40px;border-bottom:1px solid;border-bottom-color:var(--theme-ui-colors-borderColor);}.css-ylfa0c h6{font-family:-apple-system,BlinkMacSystemFont,San Francisco,Helvetica Neue,Helvetica,Ubuntu,Roboto,Noto,Segoe UI,Arial,sans-serif;line-height:1.125;font-weight:700;margin-top:0;margin-bottom:16px;font-size:12px;}.css-ylfa0c h6::before{content:" ";display:block;padding-top:30px;margin-bottom:40px;border-bottom:1px solid;border-bottom-color:var(--theme-ui-colors-borderColor);}</style><div class="css-ylfa0c"><style data-emotion="css-global 5u4lmb">:root{--ease-in-quad:cubic-bezier(0.55, 0.085, 0.68, 0.53);--ease-in-quart:cubic-bezier(0.895, 0.03, 0.685, 0.22);--ease-out-quad:cubic-bezier(0.25, 0.46, 0.45, 0.94);--ease-out-quart:cubic-bezier(0.165, 0.84, 0.44, 1);--ease-in-out-quad:cubic-bezier(0.455, 0.03, 0.515, 0.955);--ease-in-out-quart:cubic-bezier(0.77, 0, 0.175, 1);}*,*:before,*:after{box-sizing:inherit;}:root{box-sizing:border-box;}body{margin:0;}.gatsby-resp-image-image{width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;}</style><style data-emotion="css dl5fst">.css-dl5fst{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:start;-ms-flex-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:1rem 1rem;z-index:5;background:var(--theme-ui-colors-header);-webkit-transition:all 0.25s var(--ease-in-out-quad);transition:all 0.25s var(--ease-in-out-quad);border-bottom:1px solid var(--theme-ui-colors-borderColor);}@media (min-width: 38.73684210526316em){.css-dl5fst{position:fixed;top:0;left:0;right:0;padding:1rem 1.2rem;-webkit-transform:translateX(0);-moz-transform:translateX(0);-ms-transform:translateX(0);transform:translateX(0);}}</style><header class="css-dl5fst eneaom32"><style data-emotion="css 13apmpg">.css-13apmpg{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;margin:0;text-alight:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}</style><div class="css-13apmpg eneaom30"><style data-emotion="css 1gp7fjh">.css-1gp7fjh{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;margin-right:1rem;}@media (min-width: 38.73684210526316em){.css-1gp7fjh{display:none;}}</style><div class="css-1gp7fjh eneaom31"><style data-emotion="css i05np8">.css-i05np8{padding:0;background:none;border:none;color:var(--theme-ui-colors-text);cursor:pointer;font-size:0.8rem;}.css-i05np8:hover{color:var(--theme-ui-colors-primary);}</style><button type="button" aria-label="Open Navigation" title="Open Navigation" class="css-i05np8 e1onh9ai0"><style data-emotion="css z2vy6x">.css-z2vy6x{display:inline-block;width:30px;height:30px;}</style><span size="30" class="css-z2vy6x e1jw6cnh0"><style data-emotion="css 17rqqes">.css-17rqqes{fill:var(--theme-ui-colors-text);-webkit-transition:all 0.2s ease-out;transition:all 0.2s ease-out;}.css-17rqqes:hover,.css-17rqqes:focus{fill:var(--theme-ui-colors-primary);}</style><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="css-17rqqes e15jrc190"><path fill="none" d="M0 0h24v24H0V0z"></path><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"></path></svg></span></button></div><style data-emotion="css 13bl6n6">.css-13bl6n6{width:10rem;}.css-13bl6n6 p{margin:0;font-size:1.6rem;}</style><div class="css-13bl6n6 ewwdldv1"><style data-emotion="css o97vb3">.css-o97vb3{display:block;-webkit-text-decoration:none;text-decoration:none;color:var(--theme-ui-colors-text);-webkit-transition:color 0.2s ease-out;transition:color 0.2s ease-out;}.css-o97vb3:hover,.css-o97vb3:focus{color:var(--theme-ui-colors-primary);}</style><a class="css-o97vb3 ewwdldv0" href="/tietokannat/"><div data-gatsby-image-wrapper="" class="gatsby-image-wrapper gatsby-image-wrapper-constrained"><div style="max-width:2641px;display:block"><img alt="" role="presentation" aria-hidden="true" src="data:image/svg+xml;charset=utf-8,%3Csvg height=&#x27;1219&#x27; width=&#x27;2641&#x27; xmlns=&#x27;http://www.w3.org/2000/svg&#x27; version=&#x27;1.1&#x27;%3E%3C/svg%3E" style="max-width:100%;display:block;position:static"/></div><div aria-hidden="true" data-placeholder-image="" style="opacity:1;transition:opacity 500ms linear;background-color:#f8f8f8;position:absolute;top:0;left:0;bottom:0;right:0"></div><picture><source type="image/avif" data-srcset="/tietokannat/static/7c5268770640a4d118046a43d1aa9fe2/9469b/Centria-tunnus-RGB-FI-marginaalilla.avif 660w,/tietokannat/static/7c5268770640a4d118046a43d1aa9fe2/bb0ac/Centria-tunnus-RGB-FI-marginaalilla.avif 1321w,/tietokannat/static/7c5268770640a4d118046a43d1aa9fe2/7558a/Centria-tunnus-RGB-FI-marginaalilla.avif 2641w" sizes="(min-width: 2641px) 2641px, 100vw"/><source type="image/webp" data-srcset="/tietokannat/static/7c5268770640a4d118046a43d1aa9fe2/9ecf4/Centria-tunnus-RGB-FI-marginaalilla.webp 660w,/tietokannat/static/7c5268770640a4d118046a43d1aa9fe2/316a0/Centria-tunnus-RGB-FI-marginaalilla.webp 1321w,/tietokannat/static/7c5268770640a4d118046a43d1aa9fe2/93023/Centria-tunnus-RGB-FI-marginaalilla.webp 2641w" sizes="(min-width: 2641px) 2641px, 100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="opacity:0" sizes="(min-width: 2641px) 2641px, 100vw" decoding="async" loading="lazy" data-src="/tietokannat/static/7c5268770640a4d118046a43d1aa9fe2/0cf45/Centria-tunnus-RGB-FI-marginaalilla.jpg" data-srcset="/tietokannat/static/7c5268770640a4d118046a43d1aa9fe2/39f99/Centria-tunnus-RGB-FI-marginaalilla.jpg 660w,/tietokannat/static/7c5268770640a4d118046a43d1aa9fe2/844fa/Centria-tunnus-RGB-FI-marginaalilla.jpg 1321w,/tietokannat/static/7c5268770640a4d118046a43d1aa9fe2/0cf45/Centria-tunnus-RGB-FI-marginaalilla.jpg 2641w" alt="Centria banner"/></picture><noscript><picture><source type="image/avif" srcSet="/tietokannat/static/7c5268770640a4d118046a43d1aa9fe2/9469b/Centria-tunnus-RGB-FI-marginaalilla.avif 660w,/tietokannat/static/7c5268770640a4d118046a43d1aa9fe2/bb0ac/Centria-tunnus-RGB-FI-marginaalilla.avif 1321w,/tietokannat/static/7c5268770640a4d118046a43d1aa9fe2/7558a/Centria-tunnus-RGB-FI-marginaalilla.avif 2641w" sizes="(min-width: 2641px) 2641px, 100vw"/><source type="image/webp" srcSet="/tietokannat/static/7c5268770640a4d118046a43d1aa9fe2/9ecf4/Centria-tunnus-RGB-FI-marginaalilla.webp 660w,/tietokannat/static/7c5268770640a4d118046a43d1aa9fe2/316a0/Centria-tunnus-RGB-FI-marginaalilla.webp 1321w,/tietokannat/static/7c5268770640a4d118046a43d1aa9fe2/93023/Centria-tunnus-RGB-FI-marginaalilla.webp 2641w" sizes="(min-width: 2641px) 2641px, 100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="opacity:0" sizes="(min-width: 2641px) 2641px, 100vw" decoding="async" loading="lazy" src="/tietokannat/static/7c5268770640a4d118046a43d1aa9fe2/0cf45/Centria-tunnus-RGB-FI-marginaalilla.jpg" srcSet="/tietokannat/static/7c5268770640a4d118046a43d1aa9fe2/39f99/Centria-tunnus-RGB-FI-marginaalilla.jpg 660w,/tietokannat/static/7c5268770640a4d118046a43d1aa9fe2/844fa/Centria-tunnus-RGB-FI-marginaalilla.jpg 1321w,/tietokannat/static/7c5268770640a4d118046a43d1aa9fe2/0cf45/Centria-tunnus-RGB-FI-marginaalilla.jpg 2641w" alt="Centria banner"/></picture></noscript><script type="module">const t="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;if(t){const t=document.querySelectorAll("img[data-main-image]");for(let e of t){e.dataset.src&&(e.setAttribute("src",e.dataset.src),e.removeAttribute("data-src")),e.dataset.srcset&&(e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset"));const t=e.parentNode.querySelectorAll("source[data-srcset]");for(let e of t)e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset");e.complete&&(e.style.opacity=1)}}</script></div></a></div></div></header><style data-emotion="css pn4xbf">.css-pn4xbf{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;min-height:100vh;position:relative;overflow-x:hidden;background:var(--theme-ui-colors-background);-webkit-transition:background 0.25s var(--ease-in-out-quad);transition:background 0.25s var(--ease-in-out-quad);}</style><div class="css-pn4xbf e1krdi8y3"><style data-emotion="css 1oex1pb">.css-1oex1pb{margin-left:-19rem;-webkit-flex:0 0 19rem;-ms-flex:0 0 19rem;flex:0 0 19rem;font-size:0.875rem;}@media (min-width: 38.73684210526316em){.css-1oex1pb{margin-left:0;}}</style><aside class="css-1oex1pb ednv8641"><style data-emotion="css 1wrooys">.css-1wrooys{position:fixed;top:0;bottom:0;overflow-x:hidden;overflow-y:auto;width:19rem;height:100%;padding:1rem 0;background:var(--theme-ui-colors-sidebar);-webkit-transition:0.25s var(--ease-in-out-quad);transition:0.25s var(--ease-in-out-quad);}@media (min-width: 38.73684210526316em){.css-1wrooys{-webkit-transform:translateX(0);-moz-transform:translateX(0);-ms-transform:translateX(0);transform:translateX(0);padding:6.6rem 0 1rem;}}</style><nav class="css-1wrooys ednv8640"><style data-emotion="css pv1s1f">.css-pv1s1f{margin:0;padding:0;list-style:none;}</style><ul class="css-pv1s1f e1dzqqml0"><style data-emotion="css 1lbpo2j">.css-1lbpo2j{position:relative;display:block;padding:0;margin:0.2rem 0;width:100%;list-style:none;}</style><li class="css-1lbpo2j eo1v1f02"><style data-emotion="css 2kw81a">.css-2kw81a{margin:0.5rem 0 0.5rem 1.2rem;padding:0;list-style:none;}.css-2kw81a>li{margin:0;}</style><ul class="css-2kw81a eo1v1f00"><li class="css-1lbpo2j eo1v1f02"><style data-emotion="css zl329z">.css-zl329z{display:block;padding:0.5rem 1.8rem 0.5rem 1.2rem;width:100%;color:var(--theme-ui-colors-text);font-weight:600;-webkit-text-decoration:none;text-decoration:none;-webkit-transition:color 0.2s ease-out;transition:color 0.2s ease-out;}.css-zl329z:hover,.css-zl329z:focus,.css-zl329z.is-active{color:var(--theme-ui-colors-primary);}</style><a class="css-zl329z eo1v1f01" href="/tietokannat/johdanto">Johdanto</a></li><li class="css-1lbpo2j eo1v1f02"><a class="css-zl329z eo1v1f01" href="/tietokannat/alkeet">SQL:n alkeet</a></li><li class="css-1lbpo2j eo1v1f02"><a aria-current="page" class="css-zl329z eo1v1f01 is-active" href="/tietokannat/monta-taulua">Monta taulua</a></li><li class="css-1lbpo2j eo1v1f02"><a class="css-zl329z eo1v1f01" href="/tietokannat/lisaa-tekniikoita">Lisää tekniikoita</a></li><li class="css-1lbpo2j eo1v1f02"><a class="css-zl329z eo1v1f01" href="/tietokannat/suunnittelu">Tietokantojen suunnittelua</a></li><li class="css-1lbpo2j eo1v1f02"><a class="css-zl329z eo1v1f01" href="/tietokannat/tiedon-eheys">Tiedon eheys</a></li><li class="css-1lbpo2j eo1v1f02"><a class="css-zl329z eo1v1f01" href="/tietokannat/tehokkuus">Tehokkuus</a></li><li class="css-1lbpo2j eo1v1f02"><a class="css-zl329z eo1v1f01" href="/tietokannat/tehtavat">Tehtävät ja koe</a></li></ul></li></ul></nav></aside><style data-emotion="css 1a5xr11">.css-1a5xr11{-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;min-width:20rem;padding-bottom:5rem;}</style><div class="css-1a5xr11 e1krdi8y2"><style data-emotion="css 1ni6xgg">.css-1ni6xgg{margin:auto;padding:2rem 1rem 2.5rem;-webkit-transition:0.25s var(--ease-in-out-quad);transition:0.25s var(--ease-in-out-quad);opacity:1;}@media (min-width: 38.73684210526316em){.css-1ni6xgg{-webkit-transform:translateX(0);-moz-transform:translateX(0);-ms-transform:translateX(0);transform:translateX(0);opacity:1;padding:7rem 3rem 3rem;max-width:50rem;}}</style><main class="css-1ni6xgg e1krdi8y1"><style data-emotion="css 1daj6ng">.css-1daj6ng{padding-top:0;margin-top:0;}.css-1daj6ng::before{display:none!important;}</style><h1 class="css-1daj6ng e137ubq00">Monta taulua</h1><style data-emotion="css 1up8dbe">.css-1up8dbe{font-family:-apple-system,BlinkMacSystemFont,San Francisco,Helvetica Neue,Helvetica,Ubuntu,Roboto,Noto,Segoe UI,Arial,sans-serif;line-height:1.125;font-weight:700;margin-top:0;margin-bottom:16px;font-size:36px;}.css-1up8dbe::before{content:" ";display:block;padding-top:30px;margin-bottom:40px;border-bottom:1px solid;border-bottom-color:var(--theme-ui-colors-borderColor);}</style><h1 id="taulujen-viittaukset-ja-kyselyt-references-and-queries" class="css-1up8dbe">Taulujen viittaukset ja kyselyt (References and queries)</h1><style data-emotion="css zitybv">.css-zitybv{margin-top:32px;margin-bottom:32px;}</style><p class="css-zitybv">Keskeinen idea tietokannoissa on, että taulun rivi voi viitata toisen taulun riviin. Tällöin voimme muodostaa kyselyn, joka kerää tietoa useista tauluista viittausten perusteella. Käytännössä viittauksena on yleensä toisessa taulussa olevan rivin <style data-emotion="css 1eipsn1">.css-1eipsn1{color:var(--theme-ui-colors-primary);background:rgba(233, 218, 172, 0.15);border-radius:3px;padding-left:0.4rem;padding-right:0.4rem;padding-top:0.2rem;padding-bottom:0.2rem;}</style><code class="css-1eipsn1">id</code>-numero.</p><style data-emotion="css vq3asz">.css-vq3asz{font-family:-apple-system,BlinkMacSystemFont,San Francisco,Helvetica Neue,Helvetica,Ubuntu,Roboto,Noto,Segoe UI,Arial,sans-serif;line-height:1.125;font-weight:700;margin-top:0;margin-bottom:16px;font-size:28px;}.css-vq3asz::before{content:" ";display:block;padding-top:30px;margin-bottom:40px;border-bottom:1px solid;border-bottom-color:var(--theme-ui-colors-borderColor);}</style><h2 id="esimerkki" class="css-vq3asz">Esimerkki</h2><p class="css-zitybv">Tarkastellaan esimerkkinä tilannetta, jossa tietokannassa on tietoa kursseista ja niiden opettajista. Oletamme, että jokaisella kurssilla on yksi opettaja ja sama opettaja voi opettaa monta kurssia.</p><p class="css-zitybv">Tallennamme tauluun <code class="css-1eipsn1">Teachers</code> tietoa opettajista. Jokaisella opettajalla on <code class="css-1eipsn1">id</code>-numero, jolla voimme viitata siihen.</p><style data-emotion="css 14vuu3">.css-14vuu3{background-color:#282c34;color:#ffffff;font-family:"Operator Mono",monospace;font-size:0.9rem;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;overflow:auto;border-radius:6px;padding:16px;margin-top:32px;margin-bottom:32px;}.css-14vuu3 .attr-name{color:#c5a5c5;}.css-14vuu3 .attr-value{color:#8dc891;}.css-14vuu3 .comment,.css-14vuu3 .block-comment,.css-14vuu3 .prolog,.css-14vuu3 .doctype,.css-14vuu3 .cdata,.css-14vuu3 .shebang{color:#999999;}.css-14vuu3 .property,.css-14vuu3 .number,.css-14vuu3 .function-name,.css-14vuu3 .constant,.css-14vuu3 .symbol,.css-14vuu3 .deleted{color:#5a9bcf;}.css-14vuu3 .boolean{color:#ff8b50;}.css-14vuu3 .tag{color:#fc929e;}.css-14vuu3 .string{color:#8dc891;}.css-14vuu3 .punctuation{color:#8dc891;}.css-14vuu3 .selector,.css-14vuu3 .char,.css-14vuu3 .builtin,.css-14vuu3 .inserted{color:#D8DEE9;}.css-14vuu3 .function{color:#79b6f2;}.css-14vuu3 .operator,.css-14vuu3 .entity,.css-14vuu3 .url,.css-14vuu3 .variable{color:#d7deea;}.css-14vuu3 .keyword{color:#c5a5c5;}.css-14vuu3 .at-rule,.css-14vuu3 .class-name{color:#FAC863;}.css-14vuu3 .important{font-weight:400;}.css-14vuu3 .bold{font-weight:700;}.css-14vuu3 .italic{font-style:italic;}.css-14vuu3 .namespace{opacity:0.7;}.css-14vuu3 .highlight{background-color:var(--theme-ui-colors-highlight);font-weight:700;}</style><style data-emotion="css 1itelf7">.css-1itelf7{background-color:#282c34;color:#ffffff;font-family:"Operator Mono",monospace;font-size:0.9rem;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;overflow:auto;border-radius:6px;padding:16px;margin-top:32px;margin-bottom:32px;}.css-1itelf7 .attr-name{color:#c5a5c5;}.css-1itelf7 .attr-value{color:#8dc891;}.css-1itelf7 .comment,.css-1itelf7 .block-comment,.css-1itelf7 .prolog,.css-1itelf7 .doctype,.css-1itelf7 .cdata,.css-1itelf7 .shebang{color:#999999;}.css-1itelf7 .property,.css-1itelf7 .number,.css-1itelf7 .function-name,.css-1itelf7 .constant,.css-1itelf7 .symbol,.css-1itelf7 .deleted{color:#5a9bcf;}.css-1itelf7 .boolean{color:#ff8b50;}.css-1itelf7 .tag{color:#fc929e;}.css-1itelf7 .string{color:#8dc891;}.css-1itelf7 .punctuation{color:#8dc891;}.css-1itelf7 .selector,.css-1itelf7 .char,.css-1itelf7 .builtin,.css-1itelf7 .inserted{color:#D8DEE9;}.css-1itelf7 .function{color:#79b6f2;}.css-1itelf7 .operator,.css-1itelf7 .entity,.css-1itelf7 .url,.css-1itelf7 .variable{color:#d7deea;}.css-1itelf7 .keyword{color:#c5a5c5;}.css-1itelf7 .at-rule,.css-1itelf7 .class-name{color:#FAC863;}.css-1itelf7 .important{font-weight:400;}.css-1itelf7 .bold{font-weight:700;}.css-1itelf7 .italic{font-style:italic;}.css-1itelf7 .namespace{opacity:0.7;}.css-1itelf7 .highlight{background-color:var(--theme-ui-colors-highlight);font-weight:700;}</style><pre class="prism-code language-css-0 css-1itelf7"><div class="token-line"><span class="token plain">id          name      </span></div><div class="token-line"><span class="token plain">----------  ----------</span></div><div class="token-line"><span class="token plain">1           Ahonen     </span></div><div class="token-line"><span class="token plain">2           Isohanni</span></div><div class="token-line"><span class="token plain">3           Niemi   </span></div><div class="token-line"><span class="token plain">4           Laaksonen</span></div></pre><p class="css-zitybv">Taulussa <code class="css-1eipsn1">Courses</code> on puolestaan tietoa kursseista ja jokaisen kurssin kohdalla viittaus kurssin opettajaan.</p><pre class="prism-code language-css-0 css-1itelf7"><div class="token-line"><span class="token plain">id          name               teacher_id</span></div><div class="token-line"><span class="token plain">----------  ----------------   -----------</span></div><div class="token-line"><span class="token plain">1           Basic programming  3          </span></div><div class="token-line"><span class="token plain">2           More programming   1          </span></div><div class="token-line"><span class="token plain">3           Algorithms         1          </span></div><div class="token-line"><span class="token plain">4           Scrum masters      4          </span></div><div class="token-line"><span class="token plain">5           Algebra            3</span></div></pre><p class="css-zitybv">Voimme nyt hakea kurssit opettajineen seuraavalla kyselyllä, joka hakee tietoa samaan aikaan tauluista <code class="css-1eipsn1">Courses</code> ja <code class="css-1eipsn1">Teachers</code>:</p><pre class="language-sql prism-code language-sql css-1itelf7"><div class="token-line"><span class="token keyword">SELECT</span><span class="token plain"> Courses</span><span class="token punctuation">.</span><span class="token plain">name</span><span class="token punctuation">,</span><span class="token plain"> Teachers</span><span class="token punctuation">.</span><span class="token plain">name</span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">FROM</span><span class="token plain"> Courses</span><span class="token punctuation">,</span><span class="token plain"> Teachers</span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">WHERE</span><span class="token plain"> Courses</span><span class="token punctuation">.</span><span class="token plain">teacher_id </span><span class="token operator">=</span><span class="token plain"> Teachers</span><span class="token punctuation">.</span><span class="token plain">id</span><span class="token punctuation">;</span></div></pre><p class="css-zitybv">Koska kyselyssä on monta taulua, ilmoitamme sarakkeiden taulut. Esimerkiksi <code class="css-1eipsn1">Courses.name</code> viittaa taulun <code class="css-1eipsn1">Courses</code> sarakkeeseen <code class="css-1eipsn1">name</code>.</p><p class="css-zitybv">Kysely antaa seuraavan tuloksen:</p><pre class="prism-code language-css-0 css-1itelf7"><div class="token-line"><span class="token plain">name                name      </span></div><div class="token-line"><span class="token plain">------------------  ----------</span></div><div class="token-line"><span class="token plain">Basic programming   Niemi   </span></div><div class="token-line"><span class="token plain">More programming    Ahonen     </span></div><div class="token-line"><span class="token plain">Algorithms          Ahonen     </span></div><div class="token-line"><span class="token plain">Scrum masters       Laaksonen </span></div><div class="token-line"><span class="token plain">Algebra             Niemi</span></div></pre><h2 id="mitä-tässä-oikeastaan-tapahtui" class="css-vq3asz">Mitä tässä oikeastaan tapahtui?</h2><p class="css-zitybv">Yllä olevassa kyselyssä uutena asiana on, että kysely koskee useaa taulua (FROM Courses, Teachers), mutta mitä tämä tarkoittaa oikeastaan?</p><p class="css-zitybv">Ideana on, että kun kyselyssä on monta taulua, kyselyn tulosrivien lähtökohtana ovat kaikki tavat valita rivien yhdistelmiä tauluista. Tämän jälkeen <code class="css-1eipsn1">WHERE</code>-osan ehdoilla voi määrittää, mitkä yhdistelmät ovat kiinnostuksen kohteena.</p><p class="css-zitybv">Hyvä tapa saada ymmärrystä monen taulun kyselyn toiminnasta on tarkastella ensin kyselyä, joka hakee kaikki sarakkeet ja jossa ei ole <code class="css-1eipsn1">WHERE</code>-osaa. Yllä olevassa esimerkkitilanteessa tällainen kysely on seuraava:</p><pre class="language-sql prism-code language-sql css-1itelf7"><div class="token-line"><span class="token keyword">SELECT</span><span class="token plain"> </span><span class="token operator">*</span><span class="token plain"> </span><span class="token keyword">FROM</span><span class="token plain"> Courses</span><span class="token punctuation">,</span><span class="token plain"> Teachers</span><span class="token punctuation">;</span></div></pre><p class="css-zitybv">Koska taulussa <code class="css-1eipsn1">Courses</code> on 5 riviä ja taulussa <code class="css-1eipsn1">Teachers</code> on 4 riviä, kyselyn tulostaulussa on 5 * 4 = 20 riviä. Tulostaulu sisältää kaikki mahdolliset tavat valita ensin jokin rivi taulusta Courses ja sitten jokin rivi taulusta Teachers:</p><pre class="prism-code language-css-0 css-1itelf7"><div class="token-line"><span class="token plain">id          name                teacher_id   id          name      </span></div><div class="token-line"><span class="token plain">----------  ------------------  -----------  ----------  ----------</span></div><div class="token-line"><span class="token plain">1           Basic programming   3            1           Ahonen     </span></div><div class="token-line"><span class="token plain">1           Basic programming   3            2           Isohanni</span></div><div class="token-line"><span class="token plain">1           Basic programming   3            3           Niemi   </span></div><div class="token-line"><span class="token plain">1           Basic programming   3            4           Laaksonen </span></div><div class="token-line"><span class="token plain">2           More programming    1            1           Ahonen     </span></div><div class="token-line"><span class="token plain">2           More programming    1            2           Isohanni</span></div><div class="token-line"><span class="token plain">2           More programming    1            3           Niemi   </span></div><div class="token-line"><span class="token plain">2           More programming    1            4           Laaksonen </span></div><div class="token-line"><span class="token plain">3           Algorithms          1            1           Ahonen     </span></div><div class="token-line"><span class="token plain">3           Algorithms          1            2           Isohanni</span></div><div class="token-line"><span class="token plain">3           Algorithms          1            3           Niemi   </span></div><div class="token-line"><span class="token plain">3           Algorithms          1            4           Laaksonen </span></div><div class="token-line"><span class="token plain">4           Scrum masters       4            1           Ahonen     </span></div><div class="token-line"><span class="token plain">4           Scrum masters       4            2           Isohanni</span></div><div class="token-line"><span class="token plain">4           Scrum masters       4            3           Niemi   </span></div><div class="token-line"><span class="token plain">4           Scrum masters       4            4           Laaksonen </span></div><div class="token-line"><span class="token plain">5           Algebra             3            1           Ahonen     </span></div><div class="token-line"><span class="token plain">5           Algebra             3            2           Isohanni</span></div><div class="token-line"><span class="token plain">5           Algebra             3            3           Niemi   </span></div><div class="token-line"><span class="token plain">5           Algebra             3            4           Laaksonen</span></div></pre><p class="css-zitybv">Suurin osa tulosriveistä ei ole kuitenkaan kiinnostavia, koska ne eivät liity toisiinsa mitenkään. Esimerkiksi ensimmäinen tulosrivi kertoo vain, että on olemassa kurssi <em class="css-0">Basic programming</em> ja toisaalta on olemassa opettaja <em class="css-0">Ahonen</em>. Tämän vuoksi rajaamme hakua niin, että opettajan <code class="css-1eipsn1">id</code>-numeron tulee olla sama kummankin taulun riveissä:</p><pre class="language-sql prism-code language-sql css-1itelf7"><div class="token-line"><span class="token keyword">SELECT</span><span class="token plain"> </span><span class="token operator">*</span><span class="token plain"> </span><span class="token keyword">FROM</span><span class="token plain"> Courses</span><span class="token punctuation">,</span><span class="token plain"> Teachers</span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">WHERE</span><span class="token plain"> Courses</span><span class="token punctuation">.</span><span class="token plain">teacher_id </span><span class="token operator">=</span><span class="token plain"> Teachers</span><span class="token punctuation">.</span><span class="token plain">id</span><span class="token punctuation">;</span></div></pre><p class="css-zitybv">Tämän seurauksena kysely alkaa antaa mielekkäitä tuloksia:</p><pre class="prism-code language-css-0 css-1itelf7"><div class="token-line"><span class="token plain">id          name               teacher_id   id          name      </span></div><div class="token-line"><span class="token plain">----------  ----------------   -----------  ----------  ----------</span></div><div class="token-line"><span class="token plain">1           Basic programming  3            3           Niemi   </span></div><div class="token-line"><span class="token plain">2           More programming   1            1           Ahonen     </span></div><div class="token-line"><span class="token plain">3           Algorithms         1            1           Ahonen     </span></div><div class="token-line"><span class="token plain">4           Scrum masters      4            4           Laaksonen </span></div><div class="token-line"><span class="token plain">5           Algebra            3            3           Niemi</span></div></pre><p class="css-zitybv">Tämän jälkeen voimme vielä parantaa kyselyä valitsemalla meitä kiinnostavat sarakkeet:</p><pre class="language-sql prism-code language-sql css-1itelf7"><div class="token-line"><span class="token keyword">SELECT</span><span class="token plain"> Courses</span><span class="token punctuation">.</span><span class="token plain">name</span><span class="token punctuation">,</span><span class="token plain"> Teachers</span><span class="token punctuation">.</span><span class="token plain">name</span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">FROM</span><span class="token plain"> Courses</span><span class="token punctuation">,</span><span class="token plain"> Teachers</span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">WHERE</span><span class="token plain"> Courses</span><span class="token punctuation">.</span><span class="token plain">teacher_id </span><span class="token operator">=</span><span class="token plain"> Teachers</span><span class="token punctuation">.</span><span class="token plain">id</span><span class="token punctuation">;</span></div></pre><p class="css-zitybv">Näin päädymme samaan tulokseen kuin aiemmin:</p><pre class="prism-code language-css-0 css-1itelf7"><div class="token-line"><span class="token plain">name                name      </span></div><div class="token-line"><span class="token plain">------------------  ----------</span></div><div class="token-line"><span class="token plain">Basic programming   Niemi   </span></div><div class="token-line"><span class="token plain">More programming    Ahonen     </span></div><div class="token-line"><span class="token plain">Algorithms          Ahonen     </span></div><div class="token-line"><span class="token plain">Scrum masters       Laaksonen </span></div><div class="token-line"><span class="token plain">Algebra             Niemi</span></div></pre><h2 id="lisää-ehtoja-kyselyssä" class="css-vq3asz">Lisää ehtoja kyselyssä</h2><p class="css-zitybv">Monen taulun kyselyissä <code class="css-1eipsn1">WHERE</code>-osa kytkee toisiinsa meitä kiinnostavat taulujen rivit, mutta lisäksi voimme laittaa <code class="css-1eipsn1">WHERE</code>-osaan muita ehtoja samaan tapaan kuin ennenkin. Esimerkiksi voimme suorittaa seuraavan kyselyn:</p><pre class="language-sql prism-code language-sql css-1itelf7"><div class="token-line"><span class="token keyword">SELECT</span><span class="token plain"> Courses</span><span class="token punctuation">.</span><span class="token plain">name</span><span class="token punctuation">,</span><span class="token plain"> Teachers</span><span class="token punctuation">.</span><span class="token plain">name</span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">FROM</span><span class="token plain"> Courses</span><span class="token punctuation">,</span><span class="token plain"> Teachers</span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">WHERE</span><span class="token plain"> Courses</span><span class="token punctuation">.</span><span class="token plain">teacher_id </span><span class="token operator">=</span><span class="token plain"> Teachers</span><span class="token punctuation">.</span><span class="token plain">id </span><span class="token operator">AND</span><span class="token plain"> Teachers</span><span class="token punctuation">.</span><span class="token plain">name </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string">&#x27;Niemi&#x27;</span><span class="token punctuation">;</span></div></pre><p class="css-zitybv">Näin saamme haettua kurssit, joiden opettajana on Niemi:</p><pre class="prism-code language-css-0 css-1itelf7"><div class="token-line"><span class="token plain">name              name      </span></div><div class="token-line"><span class="token plain">----------------  ----------</span></div><div class="token-line"><span class="token plain">Basic programming  Niemi   </span></div><div class="token-line"><span class="token plain">Algebra  Niemi</span></div></pre><h2 id="taulujen-lyhyet-nimet" class="css-vq3asz">Taulujen lyhyet nimet</h2><p class="css-zitybv">Voimme tiivistää monen taulun kyselyä antamalla tauluille vaihtoehtoiset lyhyet nimet, joiden avulla voimme viitata niihin kyselyssä. Esimerkiksi kysely</p><pre class="language-sql prism-code language-sql css-1itelf7"><div class="token-line"><span class="token keyword">SELECT</span><span class="token plain"> Courses</span><span class="token punctuation">.</span><span class="token plain">name</span><span class="token punctuation">,</span><span class="token plain"> Teachers</span><span class="token punctuation">.</span><span class="token plain">name</span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">FROM</span><span class="token plain"> Courses</span><span class="token punctuation">,</span><span class="token plain"> Teachers</span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">WHERE</span><span class="token plain"> Courses</span><span class="token punctuation">.</span><span class="token plain">teacher_id </span><span class="token operator">=</span><span class="token plain"> Teachers</span><span class="token punctuation">.</span><span class="token plain">id</span><span class="token punctuation">;</span></div></pre><p class="css-zitybv">Voidaan esittää lyhemmin näin:</p><pre class="language-sql prism-code language-sql css-1itelf7"><div class="token-line"><span class="token keyword">SELECT</span><span class="token plain"> C</span><span class="token punctuation">.</span><span class="token plain">name</span><span class="token punctuation">,</span><span class="token plain"> T</span><span class="token punctuation">.</span><span class="token plain">name</span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">FROM</span><span class="token plain"> Courses </span><span class="token keyword">AS</span><span class="token plain"> C</span><span class="token punctuation">,</span><span class="token plain"> Teachers </span><span class="token keyword">AS</span><span class="token plain"> T</span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">WHERE</span><span class="token plain"> C</span><span class="token punctuation">.</span><span class="token plain">teacher_id </span><span class="token operator">=</span><span class="token plain"> T</span><span class="token punctuation">.</span><span class="token plain">id</span><span class="token punctuation">;</span></div></pre><p class="css-zitybv">Koska sana <code class="css-1eipsn1">AS</code> ei ole pakollinen, eli voimme lyhentää kyselyä lisää:</p><pre class="language-sql prism-code language-sql css-1itelf7"><div class="token-line"><span class="token keyword">SELECT</span><span class="token plain"> C</span><span class="token punctuation">.</span><span class="token plain">name</span><span class="token punctuation">,</span><span class="token plain"> T</span><span class="token punctuation">.</span><span class="token plain">name</span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">FROM</span><span class="token plain"> Courses C</span><span class="token punctuation">,</span><span class="token plain"> Teachers T</span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">WHERE</span><span class="token plain"> C</span><span class="token punctuation">.</span><span class="token plain">teacher_id </span><span class="token operator">=</span><span class="token plain"> T</span><span class="token punctuation">.</span><span class="token plain">id</span><span class="token punctuation">;</span></div></pre><h2 id="saman-taulun-toistaminen-repeating-a-table" class="css-vq3asz">Saman taulun toistaminen (Repeating a table)</h2><p class="css-zitybv">Monen taulun kyselyssä voi esiintyä myös monta kertaa sama taulu, kunhan niille annetaan eri nimet. Esimerkiksi seuraava kysely hakee kaikki tavat valita kahden opettajan pari:</p><pre class="language-sql prism-code language-sql css-1itelf7"><div class="token-line"><span class="token keyword">SELECT</span><span class="token plain"> A</span><span class="token punctuation">.</span><span class="token plain">name</span><span class="token punctuation">,</span><span class="token plain"> B</span><span class="token punctuation">.</span><span class="token plain">name </span><span class="token keyword">FROM</span><span class="token plain"> Teachers A</span><span class="token punctuation">,</span><span class="token plain"> Teachers B</span><span class="token punctuation">;</span></div></pre><p class="css-zitybv">Kyselyn tulos on seuraava:</p><pre class="prism-code language-css-0 css-1itelf7"><div class="token-line"><span class="token plain">name        name      </span></div><div class="token-line"><span class="token plain">----------  ----------</span></div><div class="token-line"><span class="token plain">Ahonen       Ahonen     </span></div><div class="token-line"><span class="token plain">Ahonen       Isohanni</span></div><div class="token-line"><span class="token plain">Ahonen       Niemi   </span></div><div class="token-line"><span class="token plain">Ahonen       Laaksonen </span></div><div class="token-line"><span class="token plain">Isohanni     Ahonen     </span></div><div class="token-line"><span class="token plain">Isohanni     Isohanni</span></div><div class="token-line"><span class="token plain">Isohanni     Niemi   </span></div><div class="token-line"><span class="token plain">Isohanni     Laaksonen </span></div><div class="token-line"><span class="token plain">Niemi        Ahonen     </span></div><div class="token-line"><span class="token plain">Niemi        Isohanni</span></div><div class="token-line"><span class="token plain">Niemi        Niemi   </span></div><div class="token-line"><span class="token plain">Niemi        Laaksonen </span></div><div class="token-line"><span class="token plain">Laaksonen    Ahonen     </span></div><div class="token-line"><span class="token plain">Laaksonen    Isohanni</span></div><div class="token-line"><span class="token plain">Laaksonen    Niemi   </span></div><div class="token-line"><span class="token plain">Laaksonen    Laaksonen</span></div></pre><h1 id="liitostaulut-junction-table" class="css-1up8dbe">Liitostaulut (Junction table)</h1><p class="css-zitybv">Taulujen välillä esiintyy yleensä kahdenlaisia suhteita:</p><ol class="css-0"><li class="css-0"><em class="css-0">Yksi moneen -suhde (One-to-many)</em>: Taulun A rivi liittyy enintään yhteen taulun B riviin. Taulun B rivi voi liittyä useaan taulun A riviin.</li><li class="css-0"><em class="css-0">Monta moneen -suhde (Many-to-many)</em>: Taulun A rivi voi liittyä useaan taulun B riviin. Taulun B rivi voi liittyä useaan taulun A riviin.</li></ol><p class="css-zitybv">Tapauksessa 1 voimme lisätä <em class="css-0">tauluun A</em> sarakkeen, joka viittaa <em class="css-0">tauluun B</em>, kuten teimme edellisen osion esimerkissä. Tapauksessa 2 tilanne on kuitenkin hankalampi, koska yksittäinen viittaus kummankaan taulun rivissä ei riittäisi. Ratkaisuna on luoda kolmas liitostaulu, joka sisältää tiedot viittauksista.</p><h2 id="esimerkki-1" class="css-vq3asz">Esimerkki</h2><p class="css-zitybv">Tarkastellaan esimerkkinä tilannetta, jossa verkkokaupassa on tuotteita ja asiakkaita ja jokainen asiakas on valinnut tiettyjä tuotteita ostoskoriin. Tietyn asiakkaan korissa voi olla useita tuotteita, ja toisaalta tietty tuote voi olla usean asiakkaan korissa.</p><p class="css-zitybv">Rakennamme tietokannan niin, että siinä on kolme taulua: Products, Customers ja Purchases. <em class="css-0">Liitostaulu</em> Purchases ilmaisee, mitä tuotteita on kunkin asiakkaan ostoskorissa. Sen jokainen rivi esittää yhden parin muotoa <em class="css-0">“asiakkaan X korissa on tuote Y”</em>.</p><p class="css-zitybv">Oletamme, että taulujen sisällöt ovat seuraavat:</p><pre class="prism-code language-css-0 css-1itelf7"><div class="token-line"><span class="token plain">Products </span></div><div class="token-line"><span class="token plain"> id  name     price</span></div><div class="token-line"><span class="token plain"> --  ------   -----</span></div><div class="token-line"><span class="token plain"> 1   radish   7  </span></div><div class="token-line"><span class="token plain"> 2   carrot   5  </span></div><div class="token-line"><span class="token plain"> 3   turnip   4  </span></div><div class="token-line"><span class="token plain"> 4   parsley  8  </span></div><div class="token-line"><span class="token plain"> 5   celery   4  </span></div><div class="token-line"><style data-emotion="css 13aqjzy">.css-13aqjzy{display:inline-block;}</style><span class="token plain css-13aqjzy">
</span></div><div class="token-line"><span class="token plain"> Customers </span></div><div class="token-line"><span class="token plain"> id  name  </span></div><div class="token-line"><span class="token plain"> --  ------</span></div><div class="token-line"><span class="token plain"> 1   Uolevi</span></div><div class="token-line"><span class="token plain"> 2   Maija</span></div><div class="token-line"><span class="token plain"> 3   Aapeli</span></div><div class="token-line"><span class="token plain css-13aqjzy">
</span></div><div class="token-line"><span class="token plain"> Purchases </span></div><div class="token-line"><span class="token plain"> customer_id  product_id</span></div><div class="token-line"><span class="token plain"> -----------  ----------</span></div><div class="token-line"><span class="token plain"> 1            2</span></div><div class="token-line"><span class="token plain"> 1            5</span></div><div class="token-line"><span class="token plain"> 2            1</span></div><div class="token-line"><span class="token plain"> 2            4</span></div><div class="token-line"><span class="token plain"> 2            5</span></div></pre><p class="css-zitybv">Nyt voimme hakea asiakkaat ja tuotteet seuraavasti:</p><pre class="language-sql prism-code language-sql css-1itelf7"><div class="token-line"><span class="token keyword">SELECT</span><span class="token plain"> C</span><span class="token punctuation">.</span><span class="token plain">name</span><span class="token punctuation">,</span><span class="token plain"> P</span><span class="token punctuation">.</span><span class="token plain">name</span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">FROM</span><span class="token plain"> Customers C</span><span class="token punctuation">,</span><span class="token plain"> Products P</span><span class="token punctuation">,</span><span class="token plain"> Purchases O</span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">WHERE</span><span class="token plain"> C</span><span class="token punctuation">.</span><span class="token plain">id </span><span class="token operator">=</span><span class="token plain"> O</span><span class="token punctuation">.</span><span class="token plain">customer_id </span><span class="token operator">AND</span><span class="token plain"> P</span><span class="token punctuation">.</span><span class="token plain">id </span><span class="token operator">=</span><span class="token plain"> O</span><span class="token punctuation">.</span><span class="token plain">product_id</span><span class="token punctuation">;</span></div></pre><p class="css-zitybv">Kyselyn ideana on hakea tauluista <code class="css-1eipsn1">Customers</code> ja <code class="css-1eipsn1">Products</code> taulun <code class="css-1eipsn1">Purchases</code> rivejä vastaavat tiedot. Jotta saamme mielekkäitä tuloksia, kytkemme rivit yhteen kahden ehdon avulla. Kysely tuottaa seuraavan tulostaulun:</p><pre class="prism-code language-css-0 css-1itelf7"><div class="token-line"><span class="token plain">name        name      </span></div><div class="token-line"><span class="token plain">----------  ----------</span></div><div class="token-line"><span class="token plain">Uolevi      carrot  </span></div><div class="token-line"><span class="token plain">Uolevi      celery   </span></div><div class="token-line"><span class="token plain">Maija       radish   </span></div><div class="token-line"><span class="token plain">Maija       parsley    </span></div><div class="token-line"><span class="token plain">Maija       celery</span></div></pre><p class="css-zitybv">Voimme lisätä kyselyyn lisää ehtoja, jos haluamme saada selville muuta ostoskoreista. Esimerkiksi seuraava kysely hakee Maijan korissa olevat tuotteet:</p><pre class="language-sql prism-code language-sql css-1itelf7"><div class="token-line"><span class="token keyword">SELECT</span><span class="token plain"> P</span><span class="token punctuation">.</span><span class="token plain">name</span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">FROM</span><span class="token plain"> Customers C</span><span class="token punctuation">,</span><span class="token plain"> Products P</span><span class="token punctuation">,</span><span class="token plain"> Purchases O</span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">WHERE</span><span class="token plain"> C</span><span class="token punctuation">.</span><span class="token plain">id </span><span class="token operator">=</span><span class="token plain"> O</span><span class="token punctuation">.</span><span class="token plain">customer_id </span><span class="token operator">AND</span><span class="token plain"> P</span><span class="token punctuation">.</span><span class="token plain">id </span><span class="token operator">=</span><span class="token plain"> O</span><span class="token punctuation">.</span><span class="token plain">product_id </span><span class="token operator">AND</span><span class="token plain"> C</span><span class="token punctuation">.</span><span class="token plain">name </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string">&#x27;Maija&#x27;</span><span class="token punctuation">;</span></div></pre><pre class="prism-code language-css-0 css-1itelf7"><div class="token-line"><span class="token plain">name      </span></div><div class="token-line"><span class="token plain">----------</span></div><div class="token-line"><span class="token plain">radish   </span></div><div class="token-line"><span class="token plain">parsley    </span></div><div class="token-line"><span class="token plain">celery</span></div></pre><h2 id="yhteenveto-tauluista" class="css-vq3asz">Yhteenveto tauluista</h2><p class="css-zitybv">Voimme käyttää koostefunktioita ja ryhmittelyä myös usean taulun kyselyissä. Ne käsittelevät tulostaulua samalla periaatteella kuin yhden taulun kyselyissä. Voimme esimerkiksi luoda yhteenvedon, joka näyttää jokaiselta asiakkaalta kuinka monta tuotetta heillä on ostoskoreissaan, ja mikä on kokonaishinta. Voimme tehdä sen seuraavasti:</p><pre class="language-sql prism-code language-sql css-1itelf7"><div class="token-line"><span class="token keyword">SELECT</span><span class="token plain"> C</span><span class="token punctuation">.</span><span class="token plain">name</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token plain">P</span><span class="token punctuation">.</span><span class="token plain">id</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token function">SUM</span><span class="token punctuation">(</span><span class="token plain">P</span><span class="token punctuation">.</span><span class="token plain">price</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">FROM</span><span class="token plain"> Customers C</span><span class="token punctuation">,</span><span class="token plain"> Products P</span><span class="token punctuation">,</span><span class="token plain"> Purchases O</span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">WHERE</span><span class="token plain"> C</span><span class="token punctuation">.</span><span class="token plain">id </span><span class="token operator">=</span><span class="token plain"> O</span><span class="token punctuation">.</span><span class="token plain">customer_id </span><span class="token operator">AND</span><span class="token plain"> P</span><span class="token punctuation">.</span><span class="token plain">id </span><span class="token operator">=</span><span class="token plain"> O</span><span class="token punctuation">.</span><span class="token plain">product_id</span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">GROUP</span><span class="token plain"> </span><span class="token keyword">BY</span><span class="token plain"> C</span><span class="token punctuation">.</span><span class="token plain">id</span><span class="token punctuation">;</span></div></pre><h2 id="miten-kysely-toimii" class="css-vq3asz">Miten kysely toimii?</h2><p class="css-zitybv">Tässä kyselyssä ryhmittelemme sarakkeella <code class="css-1eipsn1">C.id</code>, mutta haemme sarakkeella <code class="css-1eipsn1">C.name</code>. Tämä on sinänsä järkevää, koska sarake <code class="css-1eipsn1">C.id</code> määrää sarakkeen <code class="css-1eipsn1">C.name</code>, ja kysely toimii mainiosti SQLitessä.</p><p class="css-zitybv">Muissa tietokannoissa (kuten PostgreSQL) voi kuitenkin olla, että sellaisenaan haettavan sarakkeen tulee aina esiintyä myös ryhmittelyssä. Tällöin ryhmittelyn tulisi olla <code class="css-1eipsn1">GROUP BY C.id, C.name</code>.</p><p class="css-zitybv">Kyselyn ideana on ryhmittää rivit asiakkaan <code class="css-1eipsn1">id</code>-numeron mukaan, jolloin funktio <code class="css-1eipsn1">COUNT (P.id)</code> antaa tuotteiden lukumäärän asiakkaan ostoskorissa ja funktio <code class="css-1eipsn1">SUM(P.price)</code> antaa kyseisten tuotteiden kokonaishinnan. Tulostaulumme on seuraavanlainen:</p><pre class="prism-code language-css-0 css-1itelf7"><div class="token-line"><span class="token plain">name        COUNT(P.id)  SUM(P.price)</span></div><div class="token-line"><span class="token plain">----------  -----------  ------------</span></div><div class="token-line"><span class="token plain">Uolevi      2            9           </span></div><div class="token-line"><span class="token plain">Maija       3            19</span></div></pre><p class="css-zitybv">Tämä tarkoittaa, että Uolevin ostokset sisältävät 2 tuotetta, ja yhteishinta on 9. Maijalla on toisaalta 3 tuotetta ja kokonaishinta on 19. Kaikki näyttää hyvältä... Vai näyttääkö?</p><p class="css-zitybv">Ongelmana on, että kyselystämme puuttuu kolmas asiakas, Aapeli. Olemme törmänneet ongelmaan, jonka ratkaisemme tämän osion lopuksi.</p><h2 id="join-syntaksi-join-syntax" class="css-vq3asz">JOIN-syntaksi (JOIN syntax)</h2><p class="css-zitybv">Tähän mennessä olemme hakeneet tietoa tauluista listaamalla taulut kyselyn <code class="css-1eipsn1">FROM</code>-osassa, mikä toimii yleensä hyvin. Kuitenkin joskus on tarpeen vaihtoehtoinen <code class="css-1eipsn1">JOIN</code>-syntaksi. Siitä on hyötyä silloin, kun kyselyn tuloksesta näyttää “puuttuvan” tietoa.</p><h2 id="kyselytavat" class="css-vq3asz">Kyselytavat</h2><p class="css-zitybv">Seuraavassa on kaksi tapaa toteuttaa sama kysely, ensin käyttäen ennestään tuttua tapaa ja sitten käyttäen <code class="css-1eipsn1">JOIN</code>-syntaksia.</p><pre class="language-sql prism-code language-sql css-1itelf7"><div class="token-line"><span class="token keyword">SELECT</span><span class="token plain"> Courses</span><span class="token punctuation">.</span><span class="token plain">name</span><span class="token punctuation">,</span><span class="token plain"> Teachers</span><span class="token punctuation">.</span><span class="token plain">name</span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">FROM</span><span class="token plain"> Courses</span><span class="token punctuation">,</span><span class="token plain"> Teachers</span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">WHERE</span><span class="token plain"> Courses</span><span class="token punctuation">.</span><span class="token plain">teacher_id </span><span class="token operator">=</span><span class="token plain"> Teachers</span><span class="token punctuation">.</span><span class="token plain">id</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain css-13aqjzy">
</span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">SELECT</span><span class="token plain"> Courses</span><span class="token punctuation">.</span><span class="token plain">name</span><span class="token punctuation">,</span><span class="token plain"> Teachers</span><span class="token punctuation">.</span><span class="token plain">name</span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">FROM</span><span class="token plain"> Courses </span><span class="token keyword">JOIN</span><span class="token plain"> Teachers </span><span class="token keyword">ON</span><span class="token plain"> Courses</span><span class="token punctuation">.</span><span class="token plain">teacher_id </span><span class="token operator">=</span><span class="token plain"> Teachers</span><span class="token punctuation">.</span><span class="token plain">id</span><span class="token punctuation">;</span></div></pre><p class="css-zitybv">Jälkimmäisen kyselyn JOIN-syntaksissa taulujen nimien välissä esiintyy sana <em class="css-0">JOIN</em> ja lisäksi taulujen rivit toisiinsa kytkevä ehto annetaan erillisessä <code class="css-1eipsn1">ON</code>-osassa. Tämän jälkeen voisimme vielä käyttää <code class="css-1eipsn1">WHERE</code> lisätäksemme lisää ehtoja, kuten aiemminkin.</p><p class="css-zitybv">Tässä tapauksessa JOIN-syntaksi on vain vaihtoehtoinen tapa toteuttaa kysely eikä se tuo mitään uutta. Kuitenkin näemme seuraavaksi, miten voimme laajentaa syntaksia niin, että se antaa meille uusia mahdollisuuksia kyselyissä.</p><h2 id="puuttuvan-tiedon-ongelma" class="css-vq3asz">Puuttuvan tiedon ongelma</h2><p class="css-zitybv">Katsotaan tilannetta, missä meillä on esimerkkitaulut <code class="css-1eipsn1">Courses</code> ja <code class="css-1eipsn1">Teachers</code>, mutta yhdeltä kurssilta puuttuu opettaja:</p><pre class="prism-code language-css-0 css-1itelf7"><div class="token-line"><span class="token plain">id          name               teacher_id</span></div><div class="token-line"><span class="token plain">----------  ----------------   -----------</span></div><div class="token-line"><span class="token plain">1           Basic programming  3          </span></div><div class="token-line"><span class="token plain">2           More programming   1          </span></div><div class="token-line"><span class="token plain">3           Algorithms         1          </span></div><div class="token-line"><span class="token plain">4           Scrum masters                </span></div><div class="token-line"><span class="token plain">5           Algebra            3</span></div></pre><p class="css-zitybv">Rivillä 4 sarakkeessa <code class="css-1eipsn1">teacher_id</code> arvo on <code class="css-1eipsn1">NULL</code>, joten jos käytämme kumpaa tahansa aiempaa kyselyä, rivi 4 ei vastaa yhtäkään riviä taulusta <code class="css-1eipsn1">Teachers</code>. Tämän takia tulostaulu ei sisällä riviä Scrum masters:</p><pre class="prism-code language-css-0 css-1itelf7"><div class="token-line"><span class="token plain">name                name      </span></div><div class="token-line"><span class="token plain">------------------  ----------</span></div><div class="token-line"><span class="token plain">Basic programming   Niemi   </span></div><div class="token-line"><span class="token plain">More programming    Ahonen     </span></div><div class="token-line"><span class="token plain">Algorithms          Ahonen     </span></div><div class="token-line"><span class="token plain">Algebra             Niemi</span></div></pre><p class="css-zitybv">Ratkaisu ongelmaan on käyttää <code class="css-1eipsn1">LEFT JOIN</code>-syntaksia. Tämä tarkoittaa, että jos vasemmanpuoleinen taulu ei viittaa riviin oikeanpuoleisessa taulussa, rivi sisällytetään silti tulostauluun. Tällaiselle riville viite oikeaan tauluun on <code class="css-1eipsn1">NULL</code>.</p><p class="css-zitybv">Meidän tapauksessamme voisimme tehdä kyselyn täten:</p><pre class="language-sql prism-code language-sql css-1itelf7"><div class="token-line"><span class="token keyword">SELECT</span><span class="token plain"> Courses</span><span class="token punctuation">.</span><span class="token plain">name</span><span class="token punctuation">,</span><span class="token plain"> Teachers</span><span class="token punctuation">.</span><span class="token plain">name</span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">FROM</span><span class="token plain"> Courses </span><span class="token keyword">LEFT</span><span class="token plain"> </span><span class="token keyword">JOIN</span><span class="token plain"> Teachers </span><span class="token keyword">ON</span><span class="token plain"> Courses</span><span class="token punctuation">.</span><span class="token plain">teacher_id </span><span class="token operator">=</span><span class="token plain"> Teachers</span><span class="token punctuation">.</span><span class="token plain">id</span><span class="token punctuation">;</span></div></pre><p class="css-zitybv">Nyt saamme kurssin Scrum masters ilman opettajaa:</p><pre class="prism-code language-css-0 css-1itelf7"><div class="token-line"><span class="token plain">name                name      </span></div><div class="token-line"><span class="token plain">------------------  ----------</span></div><div class="token-line"><span class="token plain">Basic programming   Niemi   </span></div><div class="token-line"><span class="token plain">More programming    Ahonen     </span></div><div class="token-line"><span class="token plain">Algorithms          Ahonen     </span></div><div class="token-line"><span class="token plain">Scrum masters       </span></div><div class="token-line"><span class="token plain">Algebra             Niemi</span></div></pre><h2 id="join-kyselyperhe" class="css-vq3asz">JOIN-kyselyperhe</h2><p class="css-zitybv"><code class="css-1eipsn1">JOIN kyselyllä</code> on neljä muunnosta:</p><ul class="css-0"><li class="css-0"><code class="css-1eipsn1">JOIN</code>: toimii kuten tavallinen kahden taulun kysely.</li><li class="css-0"><code class="css-1eipsn1">LEFT JOIN</code>: jos vasemman taulun rivi ei yhdisty mihinkään oikean taulun riviin, se valitaan kuitenkin mukaan erikseen.</li><li class="css-0"><code class="css-1eipsn1">RIGHT JOIN</code>: jos oikean taulun rivi ei yhdisty mihinkään vasemman taulun riviin, se valitaan kuitenkin mukaan erikseen</li><li class="css-0"><code class="css-1eipsn1">FULL JOIN</code>: sekä vasemmasta että oikeasta taulusta valitaan erikseen mukaan rivit, jotka eivät yhdisty toisen taulun riviin</li></ul><p class="css-zitybv">SQLiten rajoituksena on kuitenkin, että vain kaksi ensimmäistä kyselytapaa ovat mahdollisia. Onneksi <code class="css-1eipsn1">LEFT JOIN</code> on yleensä se, mitä haluamme.</p><p class="css-zitybv">Venn-diagrammi-esitys on kutakuinkin seuraava:</p><p class="css-zitybv"><img src="https://raw.githubusercontent.com/centria/databases/master/src/images/sql_venn.png" alt="Venn diagram for SQL joins" class="css-0"/>
<style data-emotion="css 1b33xzc">.css-1b33xzc{color:var(--theme-ui-colors-primary);-webkit-transition:color 0.2s ease-out;transition:color 0.2s ease-out;}.css-1b33xzc:hover,.css-1b33xzc:focus{color:var(--theme-ui-colors-text);}</style><a href="https://www.codeproject.com/articles/33052/visual-representation-of-sql-joins" class="css-1b33xzc">Source: C.L.Moffatt</a></p><p class="css-zitybv">Tässä kaaviossa on enemmän kuin neljä variaatiota. <code class="css-1eipsn1">INNER JOIN</code> on sama kuin <code class="css-1eipsn1">JOIN</code>, ja <code class="css-1eipsn1">FULL OUTER JOIN</code> on <code class="css-1eipsn1">FULL JOIN</code>. Muut variaatiot ovat ekslusiivisia variaatioita kyselyille.</p><h2 id="puuttuuvaa-tietoa-yhteenvetokyselyssä" class="css-vq3asz">Puuttuuvaa tietoa yhteenvetokyselyssä</h2><p class="css-zitybv">Nyt voimme ratkaista puuttuvan Aapelin ongelman. Tietokannassamme meillä on seuraavat taulut:</p><pre class="prism-code language-css-0 css-1itelf7"><div class="token-line"><span class="token plain">Products </span></div><div class="token-line"><span class="token plain"> id  name     price</span></div><div class="token-line"><span class="token plain"> --  ------   -----</span></div><div class="token-line"><span class="token plain"> 1   radish   7  </span></div><div class="token-line"><span class="token plain"> 2   carrot   5  </span></div><div class="token-line"><span class="token plain"> 3   turnip   4  </span></div><div class="token-line"><span class="token plain"> 4   parsley  8  </span></div><div class="token-line"><span class="token plain"> 5   celery   4  </span></div><div class="token-line"><span class="token plain css-13aqjzy">
</span></div><div class="token-line"><span class="token plain"> Customers </span></div><div class="token-line"><span class="token plain"> id  name  </span></div><div class="token-line"><span class="token plain"> --  ------</span></div><div class="token-line"><span class="token plain"> 1   Uolevi</span></div><div class="token-line"><span class="token plain"> 2   Maija</span></div><div class="token-line"><span class="token plain"> 3   Aapeli</span></div><div class="token-line"><span class="token plain css-13aqjzy">
</span></div><div class="token-line"><span class="token plain"> Purchases </span></div><div class="token-line"><span class="token plain"> customer_id  product_id</span></div><div class="token-line"><span class="token plain"> -----------  ----------</span></div><div class="token-line"><span class="token plain"> 1            2</span></div><div class="token-line"><span class="token plain"> 1            5</span></div><div class="token-line"><span class="token plain"> 2            1</span></div><div class="token-line"><span class="token plain"> 2            4</span></div><div class="token-line"><span class="token plain"> 2            5</span></div></pre><p class="css-zitybv">Teimme ostosten yhteenvetokyselyn seuraavasti:</p><pre class="language-sql prism-code language-sql css-1itelf7"><div class="token-line"><span class="token keyword">SELECT</span><span class="token plain"> C</span><span class="token punctuation">.</span><span class="token plain">name</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token plain">P</span><span class="token punctuation">.</span><span class="token plain">id</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token function">SUM</span><span class="token punctuation">(</span><span class="token plain">P</span><span class="token punctuation">.</span><span class="token plain">price</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">FROM</span><span class="token plain"> Customers C</span><span class="token punctuation">,</span><span class="token plain"> Products P</span><span class="token punctuation">,</span><span class="token plain"> Purchases O</span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">WHERE</span><span class="token plain"> C</span><span class="token punctuation">.</span><span class="token plain">id </span><span class="token operator">=</span><span class="token plain"> O</span><span class="token punctuation">.</span><span class="token plain">customer_id </span><span class="token operator">AND</span><span class="token plain"> P</span><span class="token punctuation">.</span><span class="token plain">id </span><span class="token operator">=</span><span class="token plain"> O</span><span class="token punctuation">.</span><span class="token plain">product_id</span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">GROUP</span><span class="token plain"> </span><span class="token keyword">BY</span><span class="token plain"> C</span><span class="token punctuation">.</span><span class="token plain">id</span><span class="token punctuation">;</span></div></pre><p class="css-zitybv">Tuloksena Aapeli puuttui tulostaulustamme:</p><pre class="prism-code language-css-0 css-1itelf7"><div class="token-line"><span class="token plain">name        COUNT(P.id)  SUM(P.price)</span></div><div class="token-line"><span class="token plain">----------  -----------  ------------</span></div><div class="token-line"><span class="token plain">Uolevi      2            9</span></div><div class="token-line"><span class="token plain">Maija       3            19</span></div></pre><p class="css-zitybv">Ongelmamme syynä on ettei Aapelilla ole ostoksia, eli kun kyselymme valitsee yhdistelmän rivejä, ei ole olemassa riviä jossa Aapeli olisi läsnä. Ratkaisu on käyttää <code class="css-1eipsn1">LEFT JOIN</code> seuraavasti:</p><pre class="language-sql prism-code language-sql css-1itelf7"><div class="token-line"><span class="token keyword">SELECT</span><span class="token plain"> C</span><span class="token punctuation">.</span><span class="token plain">name</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token plain">P</span><span class="token punctuation">.</span><span class="token plain">id</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token function">SUM</span><span class="token punctuation">(</span><span class="token plain">P</span><span class="token punctuation">.</span><span class="token plain">price</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">FROM</span><span class="token plain"> Customers C </span><span class="token keyword">LEFT</span><span class="token plain"> </span><span class="token keyword">JOIN</span><span class="token plain"> Purchases O </span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">ON</span><span class="token plain"> C</span><span class="token punctuation">.</span><span class="token plain">id </span><span class="token operator">=</span><span class="token plain"> O</span><span class="token punctuation">.</span><span class="token plain">customer_id</span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">LEFT</span><span class="token plain"> </span><span class="token keyword">JOIN</span><span class="token plain"> Products P </span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">ON</span><span class="token plain"> P</span><span class="token punctuation">.</span><span class="token plain">id </span><span class="token operator">=</span><span class="token plain"> O</span><span class="token punctuation">.</span><span class="token plain">product_id</span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">GROUP</span><span class="token plain"> </span><span class="token keyword">BY</span><span class="token plain"> C</span><span class="token punctuation">.</span><span class="token plain">id</span><span class="token punctuation">;</span></div></pre><p class="css-zitybv">Nyt saamme myös Aapelin tuloksiimme:</p><pre class="prism-code language-css-0 css-1itelf7"><div class="token-line"><span class="token plain">name        COUNT(P.id)  SUM(P.price)</span></div><div class="token-line"><span class="token plain">----------  -----------  ------------</span></div><div class="token-line"><span class="token plain">Uolevi      2            9           </span></div><div class="token-line"><span class="token plain">Maija       3            19          </span></div><div class="token-line"><span class="token plain">Aapeli      0</span></div></pre><p class="css-zitybv">Koska aapelilla ei ole ostoksia, ostosten summa on <code class="css-1eipsn1">NULL</code>.</p></main></div><style data-emotion="css 7oi17p">.css-7oi17p{display:none;-webkit-flex:0 0 16rem;-ms-flex:0 0 16rem;flex:0 0 16rem;font-size:0.75rem;font-weight:600;}@media (min-width: 56.36842105263158em){.css-7oi17p{display:block;}}</style><aside class="css-7oi17p e18xy85f4"><style data-emotion="css dxzn2c">.css-dxzn2c{position:fixed;top:0;bottom:0;overflow-x:hidden;overflow-y:auto;width:16rem;height:100%;padding:7rem 1rem 0;}</style><nav class="css-dxzn2c e18xy85f3"><style data-emotion="css 1w6ve1a">.css-1w6ve1a{margin-top:0;font-size:0.7rem;font-weight:700;text-transform:uppercase;}</style><p class="css-1w6ve1a e18xy85f2">Contents</p><style data-emotion="css evawql">.css-evawql{margin:0;padding:0;list-style:none;}.css-evawql ul{margin:0;padding:0;list-style:none;}</style><ul class="css-evawql e18xy85f1"><style data-emotion="css 1uvgd5">.css-1uvgd5{margin:0.3rem 0;}</style><li class="css-1uvgd5 e18xy85f0"><style data-emotion="css 1j0udpt">.css-1j0udpt{display:inline-block;padding:0.2rem 0;width:100%;color:var(--theme-ui-colors-text);-webkit-text-decoration:none;text-decoration:none;-webkit-transition:color 0.2s ease-out;transition:color 0.2s ease-out;}.css-1j0udpt:hover,.css-1j0udpt:focus{color:var(--theme-ui-colors-primary);}</style><a href="/tietokannat/monta-taulua#taulujen-viittaukset-ja-kyselyt-references-and-queries" class="css-1j0udpt e1r4v4s10">Taulujen viittaukset ja kyselyt (References and queries)</a></li><li class="css-1uvgd5 e18xy85f0"><a href="/tietokannat/monta-taulua#esimerkki" class="css-1j0udpt e1r4v4s10">Esimerkki</a></li><li class="css-1uvgd5 e18xy85f0"><a href="/tietokannat/monta-taulua#mitä-tässä-oikeastaan-tapahtui" class="css-1j0udpt e1r4v4s10">Mitä tässä oikeastaan tapahtui?</a></li><li class="css-1uvgd5 e18xy85f0"><a href="/tietokannat/monta-taulua#lisää-ehtoja-kyselyssä" class="css-1j0udpt e1r4v4s10">Lisää ehtoja kyselyssä</a></li><li class="css-1uvgd5 e18xy85f0"><a href="/tietokannat/monta-taulua#taulujen-lyhyet-nimet" class="css-1j0udpt e1r4v4s10">Taulujen lyhyet nimet</a></li><li class="css-1uvgd5 e18xy85f0"><a href="/tietokannat/monta-taulua#saman-taulun-toistaminen-repeating-a-table" class="css-1j0udpt e1r4v4s10">Saman taulun toistaminen (Repeating a table)</a></li><li class="css-1uvgd5 e18xy85f0"><a href="/tietokannat/monta-taulua#liitostaulut-junction-table" class="css-1j0udpt e1r4v4s10">Liitostaulut (Junction table)</a></li><li class="css-1uvgd5 e18xy85f0"><a href="/tietokannat/monta-taulua#esimerkki-1" class="css-1j0udpt e1r4v4s10">Esimerkki</a></li><li class="css-1uvgd5 e18xy85f0"><a href="/tietokannat/monta-taulua#yhteenveto-tauluista" class="css-1j0udpt e1r4v4s10">Yhteenveto tauluista</a></li><li class="css-1uvgd5 e18xy85f0"><a href="/tietokannat/monta-taulua#miten-kysely-toimii" class="css-1j0udpt e1r4v4s10">Miten kysely toimii?</a></li><li class="css-1uvgd5 e18xy85f0"><a href="/tietokannat/monta-taulua#join-syntaksi-join-syntax" class="css-1j0udpt e1r4v4s10">JOIN-syntaksi (JOIN syntax)</a></li><li class="css-1uvgd5 e18xy85f0"><a href="/tietokannat/monta-taulua#kyselytavat" class="css-1j0udpt e1r4v4s10">Kyselytavat</a></li><li class="css-1uvgd5 e18xy85f0"><a href="/tietokannat/monta-taulua#puuttuvan-tiedon-ongelma" class="css-1j0udpt e1r4v4s10">Puuttuvan tiedon ongelma</a></li><li class="css-1uvgd5 e18xy85f0"><a href="/tietokannat/monta-taulua#join-kyselyperhe" class="css-1j0udpt e1r4v4s10">JOIN-kyselyperhe</a></li><li class="css-1uvgd5 e18xy85f0"><a href="/tietokannat/monta-taulua#puuttuuvaa-tietoa-yhteenvetokyselyssä" class="css-1j0udpt e1r4v4s10">Puuttuuvaa tietoa yhteenvetokyselyssä</a></li></ul></nav></aside><style data-emotion="css jl45xv">.css-jl45xv{text-align:center;position:absolute;bottom:0;width:100%;height:6rem;padding-top:10px;font-size:1rem;background:var(--theme-ui-colors-footer);color:var(--theme-ui-colors-text);}.css-jl45xv a{-webkit-text-decoration:none;text-decoration:none;color:var(--theme-ui-colors-background);}</style><footer class="css-jl45xv e1krdi8y0"><p>© <!-- -->2024<!-- -->, Julkaisija<a href="https://net.centria.fi/"> Centria</a></p><p>Lisää tietoa <a href="/tietokannat/lisenssi">Lisenssistä</a></p></footer></div></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/monta-taulua";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-0d51d282d68ddbc99621.js"],"app":["/app-5c8ce36b7ca7ddadeb9f.js"],"component---src-pages-404-js":["/component---src-pages-404-js-546f88170e8a99e0b45e.js"],"component---src-templates-docs-js":["/component---src-templates-docs-js-7a892bb90a0bfa08d7aa.js"]};/*]]>*/</script><script src="/tietokannat/polyfill-0d51d282d68ddbc99621.js" nomodule=""></script><script src="/tietokannat/component---src-templates-docs-js-7a892bb90a0bfa08d7aa.js" async=""></script><script src="/tietokannat/commons-18bdf9bc0a4174f228aa.js" async=""></script><script src="/tietokannat/app-5c8ce36b7ca7ddadeb9f.js" async=""></script><script src="/tietokannat/framework-d79a9ccabaa25efea902.js" async=""></script><script src="/tietokannat/webpack-runtime-3a0255c245ffc5167309.js" async=""></script></body></html>