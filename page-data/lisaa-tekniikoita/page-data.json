{
    "componentChunkName": "component---src-templates-docs-js",
    "path": "/lisaa-tekniikoita",
    "result": {"data":{"mdx":{"body":"var _excluded = [\"components\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"Lisää tekniikoita\",\n  \"nav_order\": 6,\n  \"hidden\": false\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"h1\", {\n    \"id\": \"sqln-ominaisuudet\"\n  }, \"SQL:n ominaisuudet\"), mdx(\"p\", null, \"SQL-kieless\\xE4 esiintyy tyyppej\\xE4 ja lausekkeita samaan tapaan kuin ohjelmoinnissa. Olemme jo n\\xE4hneet monia esimerkkej\\xE4 SQL-komennoista, mutta nyt on hyv\\xE4 hetki tutustua syv\\xE4llisemmin kielen rakenteeseen.\"), mdx(\"h1\", {\n    \"id\": \"tyypit-types\"\n  }, \"Tyypit (Types)\"), mdx(\"p\", null, \"Jokainen tietokantaj\\xE4rjestelm\\xE4 toteuttaa tyypit ja lausekkeet v\\xE4h\\xE4n omalla tavallaan ja tietokantojen toiminnassa on paljon pieni\\xE4 eroja. K\\xE4yt\\xE4nn\\xF6ss\\xE4 kuitenkin tyypit \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"INTEGER\"), \" kokonaisluvuille ja \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"TEXT\"), \" tekstille riitt\\xE4v\\xE4t melko pitk\\xE4lle.\"), mdx(\"h2\", {\n    \"id\": \"text-vs-varchar\"\n  }, \"TEXT vs. VARCHAR\"), mdx(\"p\", null, \"Perinteik\\xE4s tapa tallentaa merkkijono SQL:ss\\xE4 on k\\xE4ytt\\xE4\\xE4 tyyppi\\xE4 \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"VARCHAR\"), \", jossa annetaan suluissa merkkijonon maksimipituus. Esimerkiksi tyyppi \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"VARCHAR(100)\"), \" tarkoittaa, ett\\xE4 merkkijonossa voi olla enint\\xE4\\xE4n 100 merkki\\xE4.\"), mdx(\"p\", null, \"T\\xE4m\\xE4 on muistuma vanhan ajan ohjelmoinnista, jossa merkkijono saatettiin esitt\\xE4\\xE4 kiinte\\xE4n pituisena merkkitaulukkona. Tyyppi \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"TEXT\"), \" on kuitenkin mukavampi, koska siin\\xE4 ei tarvitse keksi\\xE4 maksimipituutta.\"), mdx(\"h2\", {\n    \"id\": \"date-datetime-time-timestamp\"\n  }, \"DATE, DATETIME, TIME, TIMESTAMP...\"), mdx(\"p\", null, \"Eritt\\xE4in hy\\xF6dyllisi\\xE4 tyyppej\\xE4 ovat ajan ja p\\xE4iv\\xE4m\\xE4\\xE4r\\xE4n tallentamiseen tarkoitetut tyypit, kuten \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"DATE\"), \" ja \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"TIME\"), \". N\\xE4iden nime\\xE4minen riippuu vahvasti tietokantaj\\xE4rjestelm\\xE4st\\xE4, joten parasta lienee tarkistaa yksityiskohdat k\\xE4ytt\\xE4m\\xE4si tietokantaj\\xE4rjestelm\\xE4n dokumentaatiosta.\"), mdx(\"h1\", {\n    \"id\": \"lausekkeet-statements\"\n  }, \"Lausekkeet (Statements)\"), mdx(\"p\", null, \"Lauseke on SQL-komennon osa, jolla on tietty arvo. Esimerkiksi kyselyss\\xE4\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-sql\"\n  }, \"SELECT price FROM Products WHERE name='radish';\\n\")), mdx(\"p\", null, \"on nelj\\xE4 lauseketta: \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"name\"), \", \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"price\"), \", \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"'radish'\"), \" ja \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"name='radish'\"), \". Lausekkeet hinta ja nimi saavat arvonsa rivin sarakkeesta, lauseke \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"'radish'\"), \" on merkkijonovakio ja lauseke \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"name='radish'\"), \" on totuusarvoinen.\"), mdx(\"p\", null, \"Voimme rakentaa monimutkaisempia lausekkeita samaan tapaan kuin ohjelmoinnissa. Esimerkiksi kysely\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-sql\"\n  }, \"SELECT price*2 FROM Products WHERE name='radish';\\n\")), mdx(\"p\", null, \"palauttaa retiisin hinnan kaksinkertaisena.\"), mdx(\"p\", null, \"Hyv\\xE4 tapa testata SQL:n lausekkeiden toimintaa on keskustella tietokannan kanssa tekem\\xE4ll\\xE4 kyselyit\\xE4, jotka eiv\\xE4t hae tietoa mist\\xE4\\xE4n taulusta vaan laskevat vain tietyn lausekkeen arvon. Keskustelu voi n\\xE4ytt\\xE4\\xE4 vaikkapa seuraavalta:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\"\n  }, \"sqlite> SELECT 2*(1+3);\\n8\\nsqlite> SELECT 'tes' || 'ts';\\ntests\\nsqlite> SELECT 3 < 5;\\n1\\n\")), mdx(\"p\", null, \"Ensimm\\xE4inen kysely laskee lausekkeen \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"2*(1+3)\"), \" arvon. Toinen kysely yhdist\\xE4\\xE4 \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"||\"), \"-operaattorilla merkkijonot 'tes' ja 'ti' merkkijonoksi 'testi'. Kolmas kysely puolestaan m\\xE4\\xE4ritt\\xE4\\xE4 ehtolausekkeen \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"3 < 5\"), \" arvon. T\\xE4st\\xE4 n\\xE4kee, ett\\xE4 SQLitess\\xE4 kokonaisluku ilmaisee totuusarvon: \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"1 on tosi\"), \" ja \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"0 on ep\\xE4tosi\"), \".\"), mdx(\"p\", null, \"Monet SQL:n lausekkeisiin liittyv\\xE4t asiat ovat tuttuja ohjelmoinnista:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"laskutoimitukset: \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"+\"), \", \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"-\"), \", \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"*\"), \", \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"/\"), \", \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"%\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"vertailut: \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"=\"), \", \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"<>\"), \", \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"<\"), \", \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"<=\"), \", \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \">\"), \", \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \">=\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"ehtojen yhdistys: \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"AND\"), \", \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"OR\"), \", \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"NOT\"))), mdx(\"p\", null, \"N\\xE4iden lis\\xE4ksi SQL:ss\\xE4 on kuitenkin my\\xF6s erikoisempia ominaisuuksia, joiden tuntemisesta on v\\xE4lill\\xE4 hy\\xF6ty\\xE4. Seuraavassa on joitakin niist\\xE4:\"), mdx(\"h2\", {\n    \"id\": \"between\"\n  }, \"BETWEEN\"), mdx(\"p\", null, \"Lauseke \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"X BETWEEN a AND b\"), \" on tosi, jos \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"X\"), \" on v\\xE4hint\\xE4\\xE4n \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"a\"), \" ja enint\\xE4\\xE4n \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"b\"), \". Esimerkiksi kysely\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-sql\"\n  }, \"SELECT * FROM Products WHERE price BETWEEN 4 AND 6;\\n\")), mdx(\"p\", null, \"hakee tuotteet, joiden hinta on v\\xE4hint\\xE4\\xE4n 4 ja korkeintaan 6. Voimme toki kirjoittaa samalla tavalla toimivan kyselyn my\\xF6s n\\xE4in:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-sql\"\n  }, \"SELECT * FROM Products WHERE price >= 4 AND price <= 6;\\n\")), mdx(\"h2\", {\n    \"id\": \"case\"\n  }, \"CASE\"), mdx(\"p\", null, \"Rakenne \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"CASE\"), \" mahdollistaa ehtolausekkeen tekemisen. Siin\\xE4 voi olla yksi tai useampi \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"WHEN\"), \"-osa sek\\xE4 mahdollinen \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"ELSE\"), \"-osa. Esimerkiksi kysely\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-sql\"\n  }, \"SELECT name, \\n  CASE WHEN price>5 THEN 'expensive' \\n    ELSE 'cheap' \\n  END \\nFROM Products;\\n\")), mdx(\"p\", null, \"hakee kunkin tuotteen nimen sek\\xE4 tiedon siit\\xE4, onko tuote kallis vai halpa. T\\xE4ss\\xE4 tuote on kallis, jos sen hinta on yli 5, ja muuten halpa. \"), mdx(\"h2\", {\n    \"id\": \"in\"\n  }, \"IN\"), mdx(\"p\", null, \"Lauseke\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \" x IN (...)\"), \" on tosi, jos \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"x\"), \" on jokin annetuista arvoista. Esimerkiksi kysely\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-sql\"\n  }, \"SELECT * FROM Products WHERE name IN ('turnip','cucumber','celery');\\n\")), mdx(\"p\", null, \"hakee tuotteet, joiden nimi on turnipsi, kurkku tai selleri.\"), mdx(\"h2\", {\n    \"id\": \"like\"\n  }, \"LIKE\"), mdx(\"p\", null, \"Lauseke \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"s LIKE p\"), \" on tosi, jos merkkijono \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"s\"), \" vastaa kuvausta \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"p\"), \". Kuvauksessa voi k\\xE4ytt\\xE4\\xE4 erikoismerkkej\\xE4 \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"_\"), \" (mik\\xE4 tahansa yksitt\\xE4inen merkki) sek\\xE4 \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"%\"), \" (mik\\xE4 tahansa m\\xE4\\xE4r\\xE4 mit\\xE4 tahansa merkkej\\xE4). Esimerkiksi kysely\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-sql\"\n  }, \"SELECT * FROM Products WHERE name LIKE '%er%';\\n\")), mdx(\"p\", null, \"hakee tuotteet, joiden nimen osana esiintyy merkkijono \\u201Cer\\u201D (kuten cucumber ja celery, eli kurkku ja selleri).\"), mdx(\"h2\", {\n    \"id\": \"null\"\n  }, \"NULL\"), mdx(\"p\", null, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"NULL\"), \"-arvojen k\\xE4sittelyyn on oma syntaksinsa. Esimerkiksi\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-sql\"\n  }, \"SELECT * FROM Products WHERE price IS NULL;\\n\")), mdx(\"p\", null, \"hakee tuotteet joille ei ole viel\\xE4 asetettu hintaa, ja kysely\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-sql\"\n  }, \"SELECT * FROM Products WHERE price IS NOT NULL;\\n\")), mdx(\"p\", null, \"hakee tuotteet joille on hinta asetettuna.\"), mdx(\"h2\", {\n    \"id\": \"funktiot\"\n  }, \"Funktiot\"), mdx(\"p\", null, \"Lausekkeiden osana voi esiinty\\xE4 my\\xF6s funktioita samaan tapaan kuin ohjelmoinnissa. T\\xE4ss\\xE4 on esimerkkin\\xE4 joitakin SQLiten funktioita. Kuten tyyppien kanssa, funktioiden saatavuus ja k\\xE4ytt\\xF6 on riippuvainen tietokantaj\\xE4rjestelm\\xE4st\\xE4, ja lis\\xE4tiedot kannattaa tarkastaa k\\xE4yt\\xF6ss\\xE4 olevan j\\xE4rjestelm\\xE4n dokumentaatiosta.\"), mdx(\"p\", null, \"T\\xE4ss\\xE4 on muutamia hy\\xF6dyllisi\\xE4 SQLiten funktioita:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\"\n  }, \"nimi          funktio\\n--------      ----------\\nABS(x)        antaa luvun x itseisarvon\\nCOALESCE(...) palauttaa listasta ensimm\\xE4isen arvon, joka ei ole NULL\\nLENGTH(s)     antaa merkkijonon s pituuden\\nLOWER(s)      muuttaa merkkijonon s kirjaimet pieniksi\\nMAX(x,y)      antaa suuremman luvuista x ja y\\nMIN(x,y)      antaa pienemm\\xE4n luvuista x ja y\\nRANDOM()      palauttaa satunnaisen luvun\\nROUND(x,d)    antaa luvun x py\\xF6ristettyn\\xE4 d desimaalin tarkkuudelle\\nUPPER(s)      muuttaa merkkijonon s kirjaimet suuriksi\\n\")), mdx(\"p\", null, \"Esimerkiksi kysely\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-sql\"\n  }, \"SELECT * FROM Products WHERE LENGTH(name)=6;\\n\")), mdx(\"p\", null, \"hakee tuotteet, joiden nimess\\xE4 on kuusi kirjainta (kuten carrot, radish, turnip ja celery). Kysely\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-sql\"\n  }, \"SELECT * FROM Products ORDER BY RANDOM();\\n\")), mdx(\"p\", null, \"puolestaan antaa rivit satunnaisessa j\\xE4rjestyksess\\xE4, koska j\\xE4rjestys ei perustu mink\\xE4\\xE4n sarakkeen sis\\xE4lt\\xF6\\xF6n vaan satunnaiseen arvoon.\"), mdx(\"h1\", {\n    \"id\": \"alikyselyt-subqueries\"\n  }, \"Alikyselyt (Subqueries)\"), mdx(\"p\", null, mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Alikysely\"), \" on SQL-komennon osana oleva lauseke, jonka arvo syntyy jonkin kyselyn perusteella. Voimme rakentaa alikyselyj\\xE4 samaan tapaan kuin varsinaisia kyselyj\\xE4 ja toteuttaa niiden avulla hakuja, joita olisi vaikea saada aikaan muuten.\"), mdx(\"h2\", {\n    \"id\": \"esimerkki\"\n  }, \"Esimerkki\"), mdx(\"p\", null, \"Tarkastellaan esimerkkin\\xE4 tilannetta, jossa tietokannassa on pelaajien tuloksia taulussa \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Results\"), \". Oletamme, ett\\xE4 taulun sis\\xE4lt\\xF6 on seuraava:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\"\n  }, \"id          name        score     \\n----------  ----------  ----------\\n1           Uolevi      120       \\n2           Maija       80        \\n3           Liisa       120       \\n4           Aapeli      45        \\n5           Kaaleppi    115    \\n\")), mdx(\"p\", null, \"Haluamme nyt selvitt\\xE4\\xE4 ne pelaajat, jotka ovat saavuttaneet korkeimman tuloksen, eli kyselyn tulisi palauttaa Uolevi ja Liisa. Saamme t\\xE4m\\xE4n aikaan alikyselyll\\xE4 seuraavasti:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-sql\"\n  }, \"SELECT name, score FROM Results \\nWHERE score = (SELECT MAX(score) FROM Results);\\n\")), mdx(\"p\", null, \"Tuloksena on:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\"\n  }, \"name        score     \\n----------  ----------\\nUolevi      120       \\nLiisa       120       \\n\")), mdx(\"p\", null, \"T\\xE4ss\\xE4 kyselyss\\xE4 alikysely on \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"SELECT MAX(score) FROM Results\"), \", joka antaa suurimman taulussa olevan tuloksen eli t\\xE4ss\\xE4 tapauksessa arvon 120. Huomaa, ett\\xE4 alikysely tulee kirjoittaa sulkujen sis\\xE4\\xE4n, jotta se ei sekoitu p\\xE4\\xE4kyselyyn.\"), mdx(\"p\", null, \"T\\xE4ss\\xE4 v\\xE4h\\xE4n monimutkaisempi kysely:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-sql\"\n  }, \"SELECT name, score FROM Results \\nWHERE score >= 0.9*(SELECT MAX(score) FROM Results);\\n\")), mdx(\"p\", null, \"T\\xE4ss\\xE4 kyselyss\\xE4 n\\xE4hd\\xE4\\xE4n, ett\\xE4 voimme k\\xE4ytt\\xE4\\xE4 alikyselyn tulosta osana lauseketta, aivan kuten mit\\xE4 tahansa muutakin arvoa. Kysely hakee pelaajat, joiden tulos on korkeintaan 10 prosenttia pienempi kuin paras tulos:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\"\n  }, \"name        score     \\n----------  ----------\\nUolevi      120       \\nLiisa       120       \\nKaaleppi    115     \\n\")), mdx(\"h2\", {\n    \"id\": \"riippuva-alikysely-correlated-or-synchronized-subquery\"\n  }, \"Riippuva alikysely (Correlated or synchronized subquery)\"), mdx(\"p\", null, \"Alikysely on mahdollista toteuttaa my\\xF6s niin, ett\\xE4 sen toiminta riippuu p\\xE4\\xE4kyselyss\\xE4 k\\xE4sitelt\\xE4v\\xE4st\\xE4 rivist\\xE4. Esimerkiksi:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-sql\"\n  }, \"SELECT name, score, \\n  (SELECT COUNT(*) FROM Results WHERE score > R.score) better \\n  FROM Results R;\\n\")), mdx(\"p\", null, \"T\\xE4m\\xE4n kysely laskee jokaiselle pelaajalle, monenko pelaajan tulos on parempi kuin pelaajan oma tulos. Esimerkiksi Maijalle vastaus on 3, koska Uolevin, Liisan ja Kaalepin tulos on parempi. Kysely antaa seuraavan tuloksen:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\"\n  }, \"name        score       better\\n----------  ----------  ----------\\nUolevi      120         0                                                    \\nMaija       80          3                                                    \\nLiisa       120         0                                                    \\nAapeli      45          4                                                    \\nKaaleppi    115         2                                                   \\n\")), mdx(\"p\", null, \"Koska taulu Results esiintyy kahdessa roolissa alikyselyss\\xE4, p\\xE4\\xE4kyselyn taululle on annettu nimi R. T\\xE4m\\xE4n ansiosta alikyselyss\\xE4 on selv\\xE4\\xE4, ett\\xE4 halutaan laskea rivej\\xE4, joiden tulos on parempi kuin p\\xE4\\xE4kyselyss\\xE4 k\\xE4sitelt\\xE4v\\xE4n rivin tulos.\"), mdx(\"h2\", {\n    \"id\": \"monta-arvoa-alikyselyssä\"\n  }, \"Monta arvoa alikyselyss\\xE4\"), mdx(\"p\", null, \"Alikysely voi my\\xF6s palauttaa useita arvoja, kunhan alikyselyn tuloksia k\\xE4ytet\\xE4\\xE4n sallitussa kohdassa. Esimerkiksi t\\xE4m\\xE4 toimii:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-sql\"\n  }, \"SELECT name FROM Products\\nWHERE id IN (SELECT product_id FROM Purchases WHERE customer_id = 1);\\n\")), mdx(\"p\", null, \"T\\xE4m\\xE4 kysely hakee kaikki tuotteiden nimet asiakkaan 1 ostoskorissa. Alikysely palauttaa tuotteiden id-arvot, jotka voidaan yhdist\\xE4\\xE4 IN-syntaksilla.\"), mdx(\"p\", null, \"Huomaa, olisimme voineet tehd\\xE4 kyselyn my\\xF6s n\\xE4in:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-sql\"\n  }, \"SELECT P.name\\nFROM Products P, Purchases O\\nWHERE P.id = O.product_id AND O.customer_id = 1;\\n\")), mdx(\"p\", null, \"Usein alikysely on vaihtoehtoinen tapa tuottaa kysely, joka voitaisiin toteuttaa esimerkiksi hyvin suunnitellulla usean taulun kyselyll\\xE4.\"), mdx(\"h1\", {\n    \"id\": \"tulosten-rajaaminen\"\n  }, \"Tulosten rajaaminen\"), mdx(\"p\", null, \"Oletusarvoisesti SQL-kysely palauttaa kaikki rivit jotka vastaavat ehtoja, mutta voimme tarvittaessa kysy\\xE4 vain osaa riveist\\xE4. T\\xE4m\\xE4 on hy\\xF6dyllist\\xE4 esimerkiksi sovelluksissa, joissa haluamme n\\xE4ytt\\xE4\\xE4 vain osan tuloksista per sivu.\"), mdx(\"h2\", {\n    \"id\": \"tapoja-rajata\"\n  }, \"Tapoja rajata\"), mdx(\"p\", null, \"Kun lis\\xE4\\xE4mme kyselyn loppuun \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"LIMIT x\"), \", kysely antaa vain \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"x\"), \" ensimm\\xE4ist\\xE4 tulosrivi\\xE4. Esimerkiksi \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"LIMIT 3\"), \" tarkoittaa, ett\\xE4 kysely antaa kolme ensimm\\xE4ist\\xE4 tulosrivi\\xE4.\"), mdx(\"p\", null, \"Yleisempi muoto on \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"LIMIT x OFFSET y\"), \", mik\\xE4 tarkoittaa, ett\\xE4 haluamme \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"x\"), \" rivi\\xE4 kohdasta \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"y\"), \" alkaen (0-indeksoituna). Esimerkiksi \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"LIMIT 3 OFFSET 1\"), \" tarkoittaa, ett\\xE4 kysely antaa toisen, kolmannen ja nelj\\xE4nnen tulosrivin.\"), mdx(\"h2\", {\n    \"id\": \"esimerkki-1\"\n  }, \"Esimerkki\"), mdx(\"p\", null, \"Tarkastellaan esimerkkin\\xE4 kysely\\xE4, joka hakee tuotteita halvimmasta kalleimpaan:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-sql\"\n  }, \"SELECT * FROM Products ORDER BY price;\\n\")), mdx(\"p\", null, \"Kyselyn tuloksena on seuraava tulostaulu:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\"\n  }, \"id          name        price     \\n----------  ----------  ----------\\n3           cucumber    2\\n5           celery      4         \\n2           carrot      5         \\n1           radish      7         \\n4           turnip      8         \\n\")), mdx(\"p\", null, \"Saamme haettua kolme halvinta tuotetta seuraavasti:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-sql\"\n  }, \"SELECT * FROM Products ORDER BY price LIMIT 3;\\n\")), mdx(\"p\", null, \"Kyselyn tulos on seuraava:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\"\n  }, \"id          name        price     \\n----------  ----------  ----------\\n3           cucumber    2         \\n5           celery      4         \\n2           carrot      5      \\n\")), mdx(\"p\", null, \"Seuraava kysely puolestaan hakee kolme halvinta tuotetta toiseksi halvimmasta tuotteesta alkaen:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-sql\"\n  }, \"SELECT * FROM Products ORDER BY price LIMIT 3 OFFSET 1;\\n\")), mdx(\"p\", null, \"T\\xE4m\\xE4n kyselyn tulos on seuraava:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\"\n  }, \"id          name        price     \\n----------  ----------  ----------\\n5           celery      4         \\n2           carrot      5         \\n1           radish      7      \\n\")), mdx(\"h2\", {\n    \"id\": \"alikyselyn-rajaaminen\"\n  }, \"Alikyselyn rajaaminen\"), mdx(\"p\", null, \"Tarkastellaan tilannetta, miss\\xE4 haluamme kolmen halvimman tuotteen yhteishinnan. Seuraava kysely ei toimi kuten haluamme:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-sql\"\n  }, \"SELECT SUM(price) FROM Products ORDER BY price LIMIT 3;\\n\")), mdx(\"p\", null, \"T\\xE4m\\xE4 palauttaa hinnan kaikista taulun tuotteista:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\"\n  }, \"SUM(price)\\n----------\\n26\\n\")), mdx(\"p\", null, \"Ongelmana on, ett\\xE4 kysely muodostaa tulostaulun, jossa on vain yksi rivi jonka arvo on 26 (kaikkien tuotteiden summa), jonka j\\xE4lkeen valitsemme kolme ensimm\\xE4ist\\xE4 rivi\\xE4 tulostaulussa (k\\xE4yt\\xE4nn\\xF6ss\\xE4 siis ainoan rivin joka siell\\xE4 on).\"), mdx(\"p\", null, \"Voimme ratkaista t\\xE4m\\xE4n alikyselyll\\xE4, miss\\xE4 haemme kolme halvinta hintaa, ja laskemme niiden summan:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-sql\"\n  }, \"SELECT SUM(price) FROM (SELECT price FROM Products ORDER BY price LIMIT 3);\\n\")), mdx(\"p\", null, \"N\\xE4in saamme halutun tuloksen:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\"\n  }, \"SUM(price)\\n----------\\n11\\n\")));\n}\n;\nMDXContent.isMDXComponent = true;","tableOfContents":{"items":[{"url":"#sqln-ominaisuudet","title":"SQL:n ominaisuudet"},{"url":"#tyypit-types","title":"Tyypit (Types)","items":[{"url":"#text-vs-varchar","title":"TEXT vs. VARCHAR"},{"url":"#date-datetime-time-timestamp","title":"DATE, DATETIME, TIME, TIMESTAMP..."}]},{"url":"#lausekkeet-statements","title":"Lausekkeet (Statements)","items":[{"url":"#between","title":"BETWEEN"},{"url":"#case","title":"CASE"},{"url":"#in","title":"IN"},{"url":"#like","title":"LIKE"},{"url":"#null","title":"NULL"},{"url":"#funktiot","title":"Funktiot"}]},{"url":"#alikyselyt-subqueries","title":"Alikyselyt (Subqueries)","items":[{"url":"#esimerkki","title":"Esimerkki"},{"url":"#riippuva-alikysely-correlated-or-synchronized-subquery","title":"Riippuva alikysely (Correlated or synchronized subquery)"},{"url":"#monta-arvoa-alikyselyssä","title":"Monta arvoa alikyselyssä"}]},{"url":"#tulosten-rajaaminen","title":"Tulosten rajaaminen","items":[{"url":"#tapoja-rajata","title":"Tapoja rajata"},{"url":"#esimerkki-1","title":"Esimerkki"},{"url":"#alikyselyn-rajaaminen","title":"Alikyselyn rajaaminen"}]}]},"frontmatter":{"title":"Lisää tekniikoita"}}},"pageContext":{"id":"67e306cd-ddd1-5cd7-b2c8-f931170806ac"}},
    "staticQueryHashes": ["1885717130","1950529541","2744905544","3020054368"]}