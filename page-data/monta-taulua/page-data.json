{
    "componentChunkName": "component---src-templates-docs-js",
    "path": "/monta-taulua",
    "result": {"data":{"mdx":{"body":"var _excluded = [\"components\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"Monta taulua\",\n  \"nav_order\": 5,\n  \"hidden\": false\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"h1\", {\n    \"id\": \"taulujen-viittaukset-ja-kyselyt-references-and-queries\"\n  }, \"Taulujen viittaukset ja kyselyt (References and queries)\"), mdx(\"p\", null, \"Keskeinen idea tietokannoissa on, ett\\xE4 taulun rivi voi viitata toisen taulun riviin. T\\xE4ll\\xF6in voimme muodostaa kyselyn, joka ker\\xE4\\xE4 tietoa useista tauluista viittausten perusteella. K\\xE4yt\\xE4nn\\xF6ss\\xE4 viittauksena on yleens\\xE4 toisessa taulussa olevan rivin \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"id\"), \"-numero.\"), mdx(\"h2\", {\n    \"id\": \"esimerkki\"\n  }, \"Esimerkki\"), mdx(\"p\", null, \"Tarkastellaan esimerkkin\\xE4 tilannetta, jossa tietokannassa on tietoa kursseista ja niiden opettajista. Oletamme, ett\\xE4 jokaisella kurssilla on yksi opettaja ja sama opettaja voi opettaa monta kurssia.\"), mdx(\"p\", null, \"Tallennamme tauluun \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Teachers\"), \" tietoa opettajista. Jokaisella opettajalla on \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"id\"), \"-numero, jolla voimme viitata siihen.\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\"\n  }, \"id          name      \\n----------  ----------\\n1           Ahonen     \\n2           Isohanni\\n3           Niemi   \\n4           Laaksonen \\n\")), mdx(\"p\", null, \"Taulussa \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Courses\"), \" on puolestaan tietoa kursseista ja jokaisen kurssin kohdalla viittaus kurssin opettajaan.\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\"\n  }, \"id          name               teacher_id\\n----------  ----------------   -----------\\n1           Basic programming  3          \\n2           More programming   1          \\n3           Algorithms         1          \\n4           Scrum masters      4          \\n5           Algebra            3        \\n\")), mdx(\"p\", null, \"Voimme nyt hakea kurssit opettajineen seuraavalla kyselyll\\xE4, joka hakee tietoa samaan aikaan tauluista \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Courses\"), \" ja \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Teachers\"), \":\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-sql\"\n  }, \"SELECT Courses.name, Teachers.name\\nFROM Courses, Teachers\\nWHERE Courses.teacher_id = Teachers.id;\\n\")), mdx(\"p\", null, \"Koska kyselyss\\xE4 on monta taulua, ilmoitamme sarakkeiden taulut. Esimerkiksi \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Courses.name\"), \" viittaa taulun \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Courses\"), \" sarakkeeseen \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"name\"), \".\"), mdx(\"p\", null, \"Kysely antaa seuraavan tuloksen:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\"\n  }, \"name                name      \\n------------------  ----------\\nBasic programming   Niemi   \\nMore programming    Ahonen     \\nAlgorithms          Ahonen     \\nScrum masters       Laaksonen \\nAlgebra             Niemi \\n\")), mdx(\"h2\", {\n    \"id\": \"mitä-tässä-oikeastaan-tapahtui\"\n  }, \"Mit\\xE4 t\\xE4ss\\xE4 oikeastaan tapahtui?\"), mdx(\"p\", null, \"Yll\\xE4 olevassa kyselyss\\xE4 uutena asiana on, ett\\xE4 kysely koskee useaa taulua (FROM Courses, Teachers), mutta mit\\xE4 t\\xE4m\\xE4 tarkoittaa oikeastaan?\"), mdx(\"p\", null, \"Ideana on, ett\\xE4 kun kyselyss\\xE4 on monta taulua, kyselyn tulosrivien l\\xE4ht\\xF6kohtana ovat kaikki tavat valita rivien yhdistelmi\\xE4 tauluista. T\\xE4m\\xE4n j\\xE4lkeen \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"WHERE\"), \"-osan ehdoilla voi m\\xE4\\xE4ritt\\xE4\\xE4, mitk\\xE4 yhdistelm\\xE4t ovat kiinnostuksen kohteena.\"), mdx(\"p\", null, \"Hyv\\xE4 tapa saada ymm\\xE4rryst\\xE4 monen taulun kyselyn toiminnasta on tarkastella ensin kysely\\xE4, joka hakee kaikki sarakkeet ja jossa ei ole \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"WHERE\"), \"-osaa. Yll\\xE4 olevassa esimerkkitilanteessa t\\xE4llainen kysely on seuraava:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-sql\"\n  }, \"SELECT * FROM Courses, Teachers;\\n\")), mdx(\"p\", null, \"Koska taulussa \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Courses\"), \" on 5 rivi\\xE4 ja taulussa \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Teachers\"), \" on 4 rivi\\xE4, kyselyn tulostaulussa on 5 * 4 = 20 rivi\\xE4. Tulostaulu sis\\xE4lt\\xE4\\xE4 kaikki mahdolliset tavat valita ensin jokin rivi taulusta Courses ja sitten jokin rivi taulusta Teachers:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\"\n  }, \"id          name                teacher_id   id          name      \\n----------  ------------------  -----------  ----------  ----------\\n1           Basic programming   3            1           Ahonen     \\n1           Basic programming   3            2           Isohanni\\n1           Basic programming   3            3           Niemi   \\n1           Basic programming   3            4           Laaksonen \\n2           More programming    1            1           Ahonen     \\n2           More programming    1            2           Isohanni\\n2           More programming    1            3           Niemi   \\n2           More programming    1            4           Laaksonen \\n3           Algorithms          1            1           Ahonen     \\n3           Algorithms          1            2           Isohanni\\n3           Algorithms          1            3           Niemi   \\n3           Algorithms          1            4           Laaksonen \\n4           Scrum masters       4            1           Ahonen     \\n4           Scrum masters       4            2           Isohanni\\n4           Scrum masters       4            3           Niemi   \\n4           Scrum masters       4            4           Laaksonen \\n5           Algebra             3            1           Ahonen     \\n5           Algebra             3            2           Isohanni\\n5           Algebra             3            3           Niemi   \\n5           Algebra             3            4           Laaksonen \\n\")), mdx(\"p\", null, \"Suurin osa tulosriveist\\xE4 ei ole kuitenkaan kiinnostavia, koska ne eiv\\xE4t liity toisiinsa mitenk\\xE4\\xE4n. Esimerkiksi ensimm\\xE4inen tulosrivi kertoo vain, ett\\xE4 on olemassa kurssi \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Basic programming\"), \" ja toisaalta on olemassa opettaja \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Ahonen\"), \". T\\xE4m\\xE4n vuoksi rajaamme hakua niin, ett\\xE4 opettajan \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"id\"), \"-numeron tulee olla sama kummankin taulun riveiss\\xE4:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-sql\"\n  }, \"SELECT * FROM Courses, Teachers\\nWHERE Courses.teacher_id = Teachers.id;\\n\")), mdx(\"p\", null, \"T\\xE4m\\xE4n seurauksena kysely alkaa antaa mielekk\\xE4it\\xE4 tuloksia:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\"\n  }, \"id          name               teacher_id   id          name      \\n----------  ----------------   -----------  ----------  ----------\\n1           Basic programming  3            3           Niemi   \\n2           More programming   1            1           Ahonen     \\n3           Algorithms         1            1           Ahonen     \\n4           Scrum masters      4            4           Laaksonen \\n5           Algebra            3            3           Niemi   \\n\")), mdx(\"p\", null, \"T\\xE4m\\xE4n j\\xE4lkeen voimme viel\\xE4 parantaa kysely\\xE4 valitsemalla meit\\xE4 kiinnostavat sarakkeet:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-sql\"\n  }, \"SELECT Courses.name, Teachers.name\\nFROM Courses, Teachers\\nWHERE Courses.teacher_id = Teachers.id;\\n\")), mdx(\"p\", null, \"N\\xE4in p\\xE4\\xE4dymme samaan tulokseen kuin aiemmin:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\"\n  }, \"name                name      \\n------------------  ----------\\nBasic programming   Niemi   \\nMore programming    Ahonen     \\nAlgorithms          Ahonen     \\nScrum masters       Laaksonen \\nAlgebra             Niemi \\n\")), mdx(\"h2\", {\n    \"id\": \"lisää-ehtoja-kyselyssä\"\n  }, \"Lis\\xE4\\xE4 ehtoja kyselyss\\xE4\"), mdx(\"p\", null, \"Monen taulun kyselyiss\\xE4 \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"WHERE\"), \"-osa kytkee toisiinsa meit\\xE4 kiinnostavat taulujen rivit, mutta lis\\xE4ksi voimme laittaa \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"WHERE\"), \"-osaan muita ehtoja samaan tapaan kuin ennenkin. Esimerkiksi voimme suorittaa seuraavan kyselyn:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-sql\"\n  }, \"SELECT Courses.name, Teachers.name\\nFROM Courses, Teachers\\nWHERE Courses.teacher_id = Teachers.id AND Teachers.name = 'Niemi';\\n\")), mdx(\"p\", null, \"N\\xE4in saamme haettua kurssit, joiden opettajana on Niemi:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\"\n  }, \"name              name      \\n----------------  ----------\\nBasic programming  Niemi   \\nAlgebra  Niemi \\n\")), mdx(\"h2\", {\n    \"id\": \"taulujen-lyhyet-nimet\"\n  }, \"Taulujen lyhyet nimet\"), mdx(\"p\", null, \"Voimme tiivist\\xE4\\xE4 monen taulun kysely\\xE4 antamalla tauluille vaihtoehtoiset lyhyet nimet, joiden avulla voimme viitata niihin kyselyss\\xE4. Esimerkiksi kysely\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-sql\"\n  }, \"SELECT Courses.name, Teachers.name\\nFROM Courses, Teachers\\nWHERE Courses.teacher_id = Teachers.id;\\n\")), mdx(\"p\", null, \"Voidaan esitt\\xE4\\xE4 lyhemmin n\\xE4in:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-sql\"\n  }, \"SELECT C.name, T.name\\nFROM Courses AS C, Teachers AS T\\nWHERE C.teacher_id = T.id;\\n\")), mdx(\"p\", null, \"Koska sana \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"AS\"), \" ei ole pakollinen, eli voimme lyhent\\xE4\\xE4 kysely\\xE4 lis\\xE4\\xE4:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-sql\"\n  }, \"SELECT C.name, T.name\\nFROM Courses C, Teachers T\\nWHERE C.teacher_id = T.id;\\n\")), mdx(\"h2\", {\n    \"id\": \"saman-taulun-toistaminen-repeating-a-table\"\n  }, \"Saman taulun toistaminen (Repeating a table)\"), mdx(\"p\", null, \"Monen taulun kyselyss\\xE4 voi esiinty\\xE4 my\\xF6s monta kertaa sama taulu, kunhan niille annetaan eri nimet. Esimerkiksi seuraava kysely hakee kaikki tavat valita kahden opettajan pari:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-sql\"\n  }, \"SELECT A.name, B.name FROM Teachers A, Teachers B;\\n\")), mdx(\"p\", null, \"Kyselyn tulos on seuraava:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\"\n  }, \"name        name      \\n----------  ----------\\nAhonen       Ahonen     \\nAhonen       Isohanni\\nAhonen       Niemi   \\nAhonen       Laaksonen \\nIsohanni     Ahonen     \\nIsohanni     Isohanni\\nIsohanni     Niemi   \\nIsohanni     Laaksonen \\nNiemi        Ahonen     \\nNiemi        Isohanni\\nNiemi        Niemi   \\nNiemi        Laaksonen \\nLaaksonen    Ahonen     \\nLaaksonen    Isohanni\\nLaaksonen    Niemi   \\nLaaksonen    Laaksonen \\n\")), mdx(\"h1\", {\n    \"id\": \"liitostaulut-junction-table\"\n  }, \"Liitostaulut (Junction table)\"), mdx(\"p\", null, \"Taulujen v\\xE4lill\\xE4 esiintyy yleens\\xE4 kahdenlaisia suhteita:\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"em\", {\n    parentName: \"li\"\n  }, \"Yksi moneen -suhde (One-to-many)\"), \": Taulun A rivi liittyy enint\\xE4\\xE4n yhteen taulun B riviin. Taulun B rivi voi liitty\\xE4 useaan taulun A riviin.\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"em\", {\n    parentName: \"li\"\n  }, \"Monta moneen -suhde (Many-to-many)\"), \": Taulun A rivi voi liitty\\xE4 useaan taulun B riviin. Taulun B rivi voi liitty\\xE4 useaan taulun A riviin.\")), mdx(\"p\", null, \"Tapauksessa 1 voimme lis\\xE4t\\xE4 \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"tauluun A\"), \" sarakkeen, joka viittaa \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"tauluun B\"), \", kuten teimme edellisen osion esimerkiss\\xE4. Tapauksessa 2 tilanne on kuitenkin hankalampi, koska yksitt\\xE4inen viittaus kummankaan taulun riviss\\xE4 ei riitt\\xE4isi. Ratkaisuna on luoda kolmas liitostaulu, joka sis\\xE4lt\\xE4\\xE4 tiedot viittauksista.\"), mdx(\"h2\", {\n    \"id\": \"esimerkki-1\"\n  }, \"Esimerkki\"), mdx(\"p\", null, \"Tarkastellaan esimerkkin\\xE4 tilannetta, jossa verkkokaupassa on tuotteita ja asiakkaita ja jokainen asiakas on valinnut tiettyj\\xE4 tuotteita ostoskoriin. Tietyn asiakkaan korissa voi olla useita tuotteita, ja toisaalta tietty tuote voi olla usean asiakkaan korissa.\"), mdx(\"p\", null, \"Rakennamme tietokannan niin, ett\\xE4 siin\\xE4 on kolme taulua: Products, Customers ja Purchases. \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Liitostaulu\"), \" Purchases ilmaisee, mit\\xE4 tuotteita on kunkin asiakkaan ostoskorissa. Sen jokainen rivi esitt\\xE4\\xE4 yhden parin muotoa \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"\\u201Casiakkaan X korissa on tuote Y\\u201D\"), \".\"), mdx(\"p\", null, \"Oletamme, ett\\xE4 taulujen sis\\xE4ll\\xF6t ovat seuraavat:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\"\n  }, \" Products \\n id  name     price\\n --  ------   -----\\n 1   radish   7  \\n 2   carrot   5  \\n 3   turnip   4  \\n 4   parsley  8  \\n 5   celery   4  \\n\\n Customers \\n id  name  \\n --  ------\\n 1   Uolevi\\n 2   Maija\\n 3   Aapeli\\n\\n Purchases \\n customer_id  product_id\\n -----------  ----------\\n 1            2\\n 1            5\\n 2            1\\n 2            4\\n 2            5\\n\")), mdx(\"p\", null, \"Nyt voimme hakea asiakkaat ja tuotteet seuraavasti:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-sql\"\n  }, \"SELECT C.name, P.name\\nFROM Customers C, Products P, Purchases O\\nWHERE C.id = O.customer_id AND P.id = O.product_id;\\n\")), mdx(\"p\", null, \"Kyselyn ideana on hakea tauluista \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Customers\"), \" ja \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Products\"), \" taulun \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Purchases\"), \" rivej\\xE4 vastaavat tiedot. Jotta saamme mielekk\\xE4it\\xE4 tuloksia, kytkemme rivit yhteen kahden ehdon avulla. Kysely tuottaa seuraavan tulostaulun:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\"\n  }, \"name        name      \\n----------  ----------\\nUolevi      carrot  \\nUolevi      celery   \\nMaija       radish   \\nMaija       parsley    \\nMaija       celery   \\n\")), mdx(\"p\", null, \"Voimme lis\\xE4t\\xE4 kyselyyn lis\\xE4\\xE4 ehtoja, jos haluamme saada selville muuta ostoskoreista. Esimerkiksi seuraava kysely hakee Maijan korissa olevat tuotteet:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-sql\"\n  }, \"SELECT P.name\\nFROM Customers C, Products P, Purchases O\\nWHERE C.id = O.customer_id AND P.id = O.product_id AND C.name = 'Maija';\\n\")), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\"\n  }, \"name      \\n----------\\nradish   \\nparsley    \\ncelery\\n\")), mdx(\"h2\", {\n    \"id\": \"yhteenveto-tauluista\"\n  }, \"Yhteenveto tauluista\"), mdx(\"p\", null, \"Voimme k\\xE4ytt\\xE4\\xE4 koostefunktioita ja ryhmittely\\xE4 my\\xF6s usean taulun kyselyiss\\xE4. Ne k\\xE4sittelev\\xE4t tulostaulua samalla periaatteella kuin yhden taulun kyselyiss\\xE4. Voimme esimerkiksi luoda yhteenvedon, joka n\\xE4ytt\\xE4\\xE4 jokaiselta asiakkaalta kuinka monta tuotetta heill\\xE4 on ostoskoreissaan, ja mik\\xE4 on kokonaishinta. Voimme tehd\\xE4 sen seuraavasti:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-sql\"\n  }, \"SELECT C.name, COUNT(P.id), SUM(P.price)\\nFROM Customers C, Products P, Purchases O\\nWHERE C.id = O.customer_id AND P.id = O.product_id\\nGROUP BY C.id;\\n\")), mdx(\"h2\", {\n    \"id\": \"miten-kysely-toimii\"\n  }, \"Miten kysely toimii?\"), mdx(\"p\", null, \"T\\xE4ss\\xE4 kyselyss\\xE4 ryhmittelemme sarakkeella \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"C.id\"), \", mutta haemme sarakkeella \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"C.name\"), \". T\\xE4m\\xE4 on sin\\xE4ns\\xE4 j\\xE4rkev\\xE4\\xE4, koska sarake \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"C.id\"), \" m\\xE4\\xE4r\\xE4\\xE4 sarakkeen \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"C.name\"), \", ja kysely toimii mainiosti SQLitess\\xE4.\"), mdx(\"p\", null, \"Muissa tietokannoissa (kuten PostgreSQL) voi kuitenkin olla, ett\\xE4 sellaisenaan haettavan sarakkeen tulee aina esiinty\\xE4 my\\xF6s ryhmittelyss\\xE4. T\\xE4ll\\xF6in ryhmittelyn tulisi olla \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"GROUP BY C.id, C.name\"), \".\"), mdx(\"p\", null, \"Kyselyn ideana on ryhmitt\\xE4\\xE4 rivit asiakkaan \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"id\"), \"-numeron mukaan, jolloin funktio \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"COUNT (P.id)\"), \" antaa tuotteiden lukum\\xE4\\xE4r\\xE4n asiakkaan ostoskorissa ja funktio \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"SUM(P.price)\"), \" antaa kyseisten tuotteiden kokonaishinnan. Tulostaulumme on seuraavanlainen:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\"\n  }, \"name        COUNT(P.id)  SUM(P.price)\\n----------  -----------  ------------\\nUolevi      2            9           \\nMaija       3            19          \\n\")), mdx(\"p\", null, \"T\\xE4m\\xE4 tarkoittaa, ett\\xE4 Uolevin ostokset sis\\xE4lt\\xE4v\\xE4t 2 tuotetta, ja yhteishinta on 9. Maijalla on toisaalta 3 tuotetta ja kokonaishinta on 19. Kaikki n\\xE4ytt\\xE4\\xE4 hyv\\xE4lt\\xE4... Vai n\\xE4ytt\\xE4\\xE4k\\xF6?\"), mdx(\"p\", null, \"Ongelmana on, ett\\xE4 kyselyst\\xE4mme puuttuu kolmas asiakas, Aapeli. Olemme t\\xF6rm\\xE4nneet ongelmaan, jonka ratkaisemme t\\xE4m\\xE4n osion lopuksi.\"), mdx(\"h2\", {\n    \"id\": \"join-syntaksi-join-syntax\"\n  }, \"JOIN-syntaksi (JOIN syntax)\"), mdx(\"p\", null, \"T\\xE4h\\xE4n menness\\xE4 olemme hakeneet tietoa tauluista listaamalla taulut kyselyn \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"FROM\"), \"-osassa, mik\\xE4 toimii yleens\\xE4 hyvin. Kuitenkin joskus on tarpeen vaihtoehtoinen \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"JOIN\"), \"-syntaksi. Siit\\xE4 on hy\\xF6ty\\xE4 silloin, kun kyselyn tuloksesta n\\xE4ytt\\xE4\\xE4 \\u201Cpuuttuvan\\u201D tietoa.\"), mdx(\"h2\", {\n    \"id\": \"kyselytavat\"\n  }, \"Kyselytavat\"), mdx(\"p\", null, \"Seuraavassa on kaksi tapaa toteuttaa sama kysely, ensin k\\xE4ytt\\xE4en ennest\\xE4\\xE4n tuttua tapaa ja sitten k\\xE4ytt\\xE4en \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"JOIN\"), \"-syntaksia.\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-sql\"\n  }, \"SELECT Courses.name, Teachers.name\\nFROM Courses, Teachers\\nWHERE Courses.teacher_id = Teachers.id;\\n\\nSELECT Courses.name, Teachers.name\\nFROM Courses JOIN Teachers ON Courses.teacher_id = Teachers.id;\\n\")), mdx(\"p\", null, \"J\\xE4lkimm\\xE4isen kyselyn JOIN-syntaksissa taulujen nimien v\\xE4liss\\xE4 esiintyy sana \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"JOIN\"), \" ja lis\\xE4ksi taulujen rivit toisiinsa kytkev\\xE4 ehto annetaan erillisess\\xE4 \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"ON\"), \"-osassa. T\\xE4m\\xE4n j\\xE4lkeen voisimme viel\\xE4 k\\xE4ytt\\xE4\\xE4 \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"WHERE\"), \" lis\\xE4t\\xE4ksemme lis\\xE4\\xE4 ehtoja, kuten aiemminkin.\"), mdx(\"p\", null, \"T\\xE4ss\\xE4 tapauksessa JOIN-syntaksi on vain vaihtoehtoinen tapa toteuttaa kysely eik\\xE4 se tuo mit\\xE4\\xE4n uutta. Kuitenkin n\\xE4emme seuraavaksi, miten voimme laajentaa syntaksia niin, ett\\xE4 se antaa meille uusia mahdollisuuksia kyselyiss\\xE4.\"), mdx(\"h2\", {\n    \"id\": \"puuttuvan-tiedon-ongelma\"\n  }, \"Puuttuvan tiedon ongelma\"), mdx(\"p\", null, \"Katsotaan tilannetta, miss\\xE4 meill\\xE4 on esimerkkitaulut \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Courses\"), \" ja \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Teachers\"), \", mutta yhdelt\\xE4 kurssilta puuttuu opettaja:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\"\n  }, \"id          name               teacher_id\\n----------  ----------------   -----------\\n1           Basic programming  3          \\n2           More programming   1          \\n3           Algorithms         1          \\n4           Scrum masters                \\n5           Algebra            3        \\n\")), mdx(\"p\", null, \"Rivill\\xE4 4 sarakkeessa \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"teacher_id\"), \" arvo on \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"NULL\"), \", joten jos k\\xE4yt\\xE4mme kumpaa tahansa aiempaa kysely\\xE4, rivi 4 ei vastaa yht\\xE4k\\xE4\\xE4n rivi\\xE4 taulusta \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Teachers\"), \". T\\xE4m\\xE4n takia tulostaulu ei sis\\xE4ll\\xE4 rivi\\xE4 Scrum masters:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\"\n  }, \"name                name      \\n------------------  ----------\\nBasic programming   Niemi   \\nMore programming    Ahonen     \\nAlgorithms          Ahonen     \\nAlgebra             Niemi \\n\")), mdx(\"p\", null, \"Ratkaisu ongelmaan on k\\xE4ytt\\xE4\\xE4 \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"LEFT JOIN\"), \"-syntaksia. T\\xE4m\\xE4 tarkoittaa, ett\\xE4 jos vasemmanpuoleinen taulu ei viittaa riviin oikeanpuoleisessa taulussa, rivi sis\\xE4llytet\\xE4\\xE4n silti tulostauluun. T\\xE4llaiselle riville viite oikeaan tauluun on \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"NULL\"), \".\"), mdx(\"p\", null, \"Meid\\xE4n tapauksessamme voisimme tehd\\xE4 kyselyn t\\xE4ten:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-sql\"\n  }, \"SELECT Courses.name, Teachers.name\\nFROM Courses LEFT JOIN Teachers ON Courses.teacher_id = Teachers.id;\\n\")), mdx(\"p\", null, \"Nyt saamme kurssin Scrum masters ilman opettajaa:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\"\n  }, \"name                name      \\n------------------  ----------\\nBasic programming   Niemi   \\nMore programming    Ahonen     \\nAlgorithms          Ahonen     \\nScrum masters       \\nAlgebra             Niemi \\n\")), mdx(\"h2\", {\n    \"id\": \"join-kyselyperhe\"\n  }, \"JOIN-kyselyperhe\"), mdx(\"p\", null, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"JOIN kyselyll\\xE4\"), \" on nelj\\xE4 muunnosta:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"JOIN\"), \": toimii kuten tavallinen kahden taulun kysely.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"LEFT JOIN\"), \": jos vasemman taulun rivi ei yhdisty mihink\\xE4\\xE4n oikean taulun riviin, se valitaan kuitenkin mukaan erikseen.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"RIGHT JOIN\"), \": jos oikean taulun rivi ei yhdisty mihink\\xE4\\xE4n vasemman taulun riviin, se valitaan kuitenkin mukaan erikseen\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"FULL JOIN\"), \": sek\\xE4 vasemmasta ett\\xE4 oikeasta taulusta valitaan erikseen mukaan rivit, jotka eiv\\xE4t yhdisty toisen taulun riviin\")), mdx(\"p\", null, \"SQLiten rajoituksena on kuitenkin, ett\\xE4 vain kaksi ensimm\\xE4ist\\xE4 kyselytapaa ovat mahdollisia. Onneksi \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"LEFT JOIN\"), \" on yleens\\xE4 se, mit\\xE4 haluamme.\"), mdx(\"p\", null, \"Venn-diagrammi-esitys on kutakuinkin seuraava:\"), mdx(\"p\", null, mdx(\"img\", {\n    parentName: \"p\",\n    \"src\": \"https://raw.githubusercontent.com/centria/databases/master/src/images/sql_venn.png\",\n    \"alt\": \"Venn diagram for SQL joins\"\n  }), \"\\n\", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://www.codeproject.com/articles/33052/visual-representation-of-sql-joins\"\n  }, \"Source: C.L.Moffatt\")), mdx(\"p\", null, \"T\\xE4ss\\xE4 kaaviossa on enemm\\xE4n kuin nelj\\xE4 variaatiota. \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"INNER JOIN\"), \" on sama kuin \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"JOIN\"), \", ja \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"FULL OUTER JOIN\"), \" on \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"FULL JOIN\"), \". Muut variaatiot ovat ekslusiivisia variaatioita kyselyille.\"), mdx(\"h2\", {\n    \"id\": \"puuttuuvaa-tietoa-yhteenvetokyselyssä\"\n  }, \"Puuttuuvaa tietoa yhteenvetokyselyss\\xE4\"), mdx(\"p\", null, \"Nyt voimme ratkaista puuttuvan Aapelin ongelman. Tietokannassamme meill\\xE4 on seuraavat taulut:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\"\n  }, \" Products \\n id  name     price\\n --  ------   -----\\n 1   radish   7  \\n 2   carrot   5  \\n 3   turnip   4  \\n 4   parsley  8  \\n 5   celery   4  \\n\\n Customers \\n id  name  \\n --  ------\\n 1   Uolevi\\n 2   Maija\\n 3   Aapeli\\n\\n Purchases \\n customer_id  product_id\\n -----------  ----------\\n 1            2\\n 1            5\\n 2            1\\n 2            4\\n 2            5\\n\")), mdx(\"p\", null, \"Teimme ostosten yhteenvetokyselyn seuraavasti:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-sql\"\n  }, \"SELECT C.name, COUNT(P.id), SUM(P.price)\\nFROM Customers C, Products P, Purchases O\\nWHERE C.id = O.customer_id AND P.id = O.product_id\\nGROUP BY C.id;\\n\")), mdx(\"p\", null, \"Tuloksena Aapeli puuttui tulostaulustamme:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\"\n  }, \"name        COUNT(P.id)  SUM(P.price)\\n----------  -----------  ------------\\nUolevi      2            9\\nMaija       3            19\\n\")), mdx(\"p\", null, \"Ongelmamme syyn\\xE4 on ettei Aapelilla ole ostoksia, eli kun kyselymme valitsee yhdistelm\\xE4n rivej\\xE4, ei ole olemassa rivi\\xE4 jossa Aapeli olisi l\\xE4sn\\xE4. Ratkaisu on k\\xE4ytt\\xE4\\xE4 \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"LEFT JOIN\"), \" seuraavasti:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-sql\"\n  }, \"SELECT C.name, COUNT(P.id), SUM(P.price)\\nFROM Customers C LEFT JOIN Purchases O \\n    ON C.id = O.customer_id\\nLEFT JOIN Products P \\n    ON P.id = O.product_id\\nGROUP BY C.id;\\n\")), mdx(\"p\", null, \"Nyt saamme my\\xF6s Aapelin tuloksiimme:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\"\n  }, \"name        COUNT(P.id)  SUM(P.price)\\n----------  -----------  ------------\\nUolevi      2            9           \\nMaija       3            19          \\nAapeli      0                     \\n\")), mdx(\"p\", null, \"Koska aapelilla ei ole ostoksia, ostosten summa on \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"NULL\"), \".\"));\n}\n;\nMDXContent.isMDXComponent = true;","tableOfContents":{"items":[{"url":"#taulujen-viittaukset-ja-kyselyt-references-and-queries","title":"Taulujen viittaukset ja kyselyt (References and queries)","items":[{"url":"#esimerkki","title":"Esimerkki"},{"url":"#mitä-tässä-oikeastaan-tapahtui","title":"Mitä tässä oikeastaan tapahtui?"},{"url":"#lisää-ehtoja-kyselyssä","title":"Lisää ehtoja kyselyssä"},{"url":"#taulujen-lyhyet-nimet","title":"Taulujen lyhyet nimet"},{"url":"#saman-taulun-toistaminen-repeating-a-table","title":"Saman taulun toistaminen (Repeating a table)"}]},{"url":"#liitostaulut-junction-table","title":"Liitostaulut (Junction table)","items":[{"url":"#esimerkki-1","title":"Esimerkki"},{"url":"#yhteenveto-tauluista","title":"Yhteenveto tauluista"},{"url":"#miten-kysely-toimii","title":"Miten kysely toimii?"},{"url":"#join-syntaksi-join-syntax","title":"JOIN-syntaksi (JOIN syntax)"},{"url":"#kyselytavat","title":"Kyselytavat"},{"url":"#puuttuvan-tiedon-ongelma","title":"Puuttuvan tiedon ongelma"},{"url":"#join-kyselyperhe","title":"JOIN-kyselyperhe"},{"url":"#puuttuuvaa-tietoa-yhteenvetokyselyssä","title":"Puuttuuvaa tietoa yhteenvetokyselyssä"}]}]},"frontmatter":{"title":"Monta taulua"}}},"pageContext":{"id":"65d0dfab-b371-5062-96c3-af84242b1758"}},
    "staticQueryHashes": ["1885717130","1950529541","2744905544","3020054368"]}