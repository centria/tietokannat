<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="generator" content="Gatsby 3.14.6"/><link rel="icon" href="/tietokannat/favicon-32x32.png?v=dd253edc615d56282c5dcdfb24ca4261" type="image/png"/><link rel="manifest" href="/tietokannat/manifest.webmanifest" crossorigin="anonymous"/><meta name="theme-color" content="#a2466c"/><link rel="apple-touch-icon" sizes="48x48" href="/tietokannat/icons/icon-48x48.png?v=dd253edc615d56282c5dcdfb24ca4261"/><link rel="apple-touch-icon" sizes="72x72" href="/tietokannat/icons/icon-72x72.png?v=dd253edc615d56282c5dcdfb24ca4261"/><link rel="apple-touch-icon" sizes="96x96" href="/tietokannat/icons/icon-96x96.png?v=dd253edc615d56282c5dcdfb24ca4261"/><link rel="apple-touch-icon" sizes="144x144" href="/tietokannat/icons/icon-144x144.png?v=dd253edc615d56282c5dcdfb24ca4261"/><link rel="apple-touch-icon" sizes="192x192" href="/tietokannat/icons/icon-192x192.png?v=dd253edc615d56282c5dcdfb24ca4261"/><link rel="apple-touch-icon" sizes="256x256" href="/tietokannat/icons/icon-256x256.png?v=dd253edc615d56282c5dcdfb24ca4261"/><link rel="apple-touch-icon" sizes="384x384" href="/tietokannat/icons/icon-384x384.png?v=dd253edc615d56282c5dcdfb24ca4261"/><link rel="apple-touch-icon" sizes="512x512" href="/tietokannat/icons/icon-512x512.png?v=dd253edc615d56282c5dcdfb24ca4261"/><title data-react-helmet="true">Tietokantojen suunnittelua</title><style>.gatsby-image-wrapper{position:relative;overflow:hidden}.gatsby-image-wrapper img{bottom:0;height:100%;left:0;margin:0;max-width:none;padding:0;position:absolute;right:0;top:0;width:100%;object-fit:cover}.gatsby-image-wrapper [data-main-image]{opacity:0;transform:translateZ(0);transition:opacity .25s linear;will-change:opacity}.gatsby-image-wrapper-constrained{display:inline-block;vertical-align:top}</style><noscript><style>.gatsby-image-wrapper noscript [data-main-image]{opacity:1!important}.gatsby-image-wrapper [data-placeholder-image]{opacity:0!important}</style></noscript><script type="module">const e="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;e&&document.body.addEventListener("load",(function(e){if(void 0===e.target.dataset.mainImage)return;if(void 0===e.target.dataset.gatsbyImageSsr)return;const t=e.target;let a=null,n=t;for(;null===a&&n;)void 0!==n.parentNode.dataset.gatsbyImageWrapper&&(a=n.parentNode),n=n.parentNode;const o=a.querySelector("[data-placeholder-image]"),r=new Image;r.src=t.currentSrc,r.decode().catch((()=>{})).then((()=>{t.style.opacity=1,o&&(o.style.opacity=0,o.style.transition="opacity 500ms linear")}))}),!0);</script><link as="script" rel="preload" href="/tietokannat/webpack-runtime-3a0255c245ffc5167309.js"/><link as="script" rel="preload" href="/tietokannat/framework-d79a9ccabaa25efea902.js"/><link as="script" rel="preload" href="/tietokannat/app-5c8ce36b7ca7ddadeb9f.js"/><link as="script" rel="preload" href="/tietokannat/commons-18bdf9bc0a4174f228aa.js"/><link as="script" rel="preload" href="/tietokannat/component---src-templates-docs-js-7a892bb90a0bfa08d7aa.js"/><link as="fetch" rel="preload" href="/tietokannat/page-data/suunnittelu/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/tietokannat/page-data/sq/d/1885717130.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/tietokannat/page-data/sq/d/1950529541.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/tietokannat/page-data/sq/d/2744905544.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/tietokannat/page-data/sq/d/3020054368.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/tietokannat/page-data/app-data.json" crossorigin="anonymous"/></head><body><script>(function() { try {
  var mode = localStorage.getItem('theme-ui-color-mode');
  if (!mode) return
  document.documentElement.classList.add('theme-ui-' + mode);
} catch (e) {} })();</script><div id="___gatsby"><style data-emotion="css-global xghfnh">html{--theme-ui-colors-header:#fff;--theme-ui-colors-text:#000;--theme-ui-colors-primary:#E10E49;--theme-ui-colors-secondary:#c70d3a;--theme-ui-colors-highlight:#efeffe;--theme-ui-colors-exercise:#3333ee;--theme-ui-colors-sidebar:#f8f5f1;--theme-ui-colors-background:#fff;--theme-ui-colors-borderColor:rgba(0, 0, 0, 0.15);--theme-ui-colors-footer:#E10E49;color:var(--theme-ui-colors-text);background-color:var(--theme-ui-colors-background);}</style><style data-emotion="css-global dcnl1w">*{box-sizing:border-box;}html{font-family:-apple-system,BlinkMacSystemFont,San Francisco,Helvetica Neue,Helvetica,Ubuntu,Roboto,Noto,Segoe UI,Arial,sans-serif;line-height:1.5;font-weight:400;}html h1{font-family:-apple-system,BlinkMacSystemFont,San Francisco,Helvetica Neue,Helvetica,Ubuntu,Roboto,Noto,Segoe UI,Arial,sans-serif;line-height:1.125;font-weight:700;margin-top:0;margin-bottom:16px;font-size:36px;}html h1::before{content:" ";display:block;padding-top:30px;margin-bottom:40px;border-bottom:1px solid;border-bottom-color:var(--theme-ui-colors-borderColor);}html h2{font-family:-apple-system,BlinkMacSystemFont,San Francisco,Helvetica Neue,Helvetica,Ubuntu,Roboto,Noto,Segoe UI,Arial,sans-serif;line-height:1.125;font-weight:700;margin-top:0;margin-bottom:16px;font-size:28px;}html h2::before{content:" ";display:block;padding-top:30px;margin-bottom:40px;border-bottom:1px solid;border-bottom-color:var(--theme-ui-colors-borderColor);}html h3{font-family:-apple-system,BlinkMacSystemFont,San Francisco,Helvetica Neue,Helvetica,Ubuntu,Roboto,Noto,Segoe UI,Arial,sans-serif;line-height:1.125;font-weight:700;margin-top:0;margin-bottom:16px;font-size:24px;}html h3::before{content:" ";display:block;padding-top:30px;margin-bottom:40px;border-bottom:1px solid;border-bottom-color:var(--theme-ui-colors-borderColor);}html h4{font-family:-apple-system,BlinkMacSystemFont,San Francisco,Helvetica Neue,Helvetica,Ubuntu,Roboto,Noto,Segoe UI,Arial,sans-serif;line-height:1.125;font-weight:700;margin-top:0;margin-bottom:16px;font-size:16px;}html h4::before{content:" ";display:block;padding-top:30px;margin-bottom:40px;border-bottom:1px solid;border-bottom-color:var(--theme-ui-colors-borderColor);}html h5{font-family:-apple-system,BlinkMacSystemFont,San Francisco,Helvetica Neue,Helvetica,Ubuntu,Roboto,Noto,Segoe UI,Arial,sans-serif;line-height:1.125;font-weight:700;margin-top:0;margin-bottom:16px;font-size:14px;}html h5::before{content:" ";display:block;padding-top:30px;margin-bottom:40px;border-bottom:1px solid;border-bottom-color:var(--theme-ui-colors-borderColor);}html h6{font-family:-apple-system,BlinkMacSystemFont,San Francisco,Helvetica Neue,Helvetica,Ubuntu,Roboto,Noto,Segoe UI,Arial,sans-serif;line-height:1.125;font-weight:700;margin-top:0;margin-bottom:16px;font-size:12px;}html h6::before{content:" ";display:block;padding-top:30px;margin-bottom:40px;border-bottom:1px solid;border-bottom-color:var(--theme-ui-colors-borderColor);}body{margin:0;}</style><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><style data-emotion="css ylfa0c">.css-ylfa0c{font-family:-apple-system,BlinkMacSystemFont,San Francisco,Helvetica Neue,Helvetica,Ubuntu,Roboto,Noto,Segoe UI,Arial,sans-serif;line-height:1.5;font-weight:400;}.css-ylfa0c h1{font-family:-apple-system,BlinkMacSystemFont,San Francisco,Helvetica Neue,Helvetica,Ubuntu,Roboto,Noto,Segoe UI,Arial,sans-serif;line-height:1.125;font-weight:700;margin-top:0;margin-bottom:16px;font-size:36px;}.css-ylfa0c h1::before{content:" ";display:block;padding-top:30px;margin-bottom:40px;border-bottom:1px solid;border-bottom-color:var(--theme-ui-colors-borderColor);}.css-ylfa0c h2{font-family:-apple-system,BlinkMacSystemFont,San Francisco,Helvetica Neue,Helvetica,Ubuntu,Roboto,Noto,Segoe UI,Arial,sans-serif;line-height:1.125;font-weight:700;margin-top:0;margin-bottom:16px;font-size:28px;}.css-ylfa0c h2::before{content:" ";display:block;padding-top:30px;margin-bottom:40px;border-bottom:1px solid;border-bottom-color:var(--theme-ui-colors-borderColor);}.css-ylfa0c h3{font-family:-apple-system,BlinkMacSystemFont,San Francisco,Helvetica Neue,Helvetica,Ubuntu,Roboto,Noto,Segoe UI,Arial,sans-serif;line-height:1.125;font-weight:700;margin-top:0;margin-bottom:16px;font-size:24px;}.css-ylfa0c h3::before{content:" ";display:block;padding-top:30px;margin-bottom:40px;border-bottom:1px solid;border-bottom-color:var(--theme-ui-colors-borderColor);}.css-ylfa0c h4{font-family:-apple-system,BlinkMacSystemFont,San Francisco,Helvetica Neue,Helvetica,Ubuntu,Roboto,Noto,Segoe UI,Arial,sans-serif;line-height:1.125;font-weight:700;margin-top:0;margin-bottom:16px;font-size:16px;}.css-ylfa0c h4::before{content:" ";display:block;padding-top:30px;margin-bottom:40px;border-bottom:1px solid;border-bottom-color:var(--theme-ui-colors-borderColor);}.css-ylfa0c h5{font-family:-apple-system,BlinkMacSystemFont,San Francisco,Helvetica Neue,Helvetica,Ubuntu,Roboto,Noto,Segoe UI,Arial,sans-serif;line-height:1.125;font-weight:700;margin-top:0;margin-bottom:16px;font-size:14px;}.css-ylfa0c h5::before{content:" ";display:block;padding-top:30px;margin-bottom:40px;border-bottom:1px solid;border-bottom-color:var(--theme-ui-colors-borderColor);}.css-ylfa0c h6{font-family:-apple-system,BlinkMacSystemFont,San Francisco,Helvetica Neue,Helvetica,Ubuntu,Roboto,Noto,Segoe UI,Arial,sans-serif;line-height:1.125;font-weight:700;margin-top:0;margin-bottom:16px;font-size:12px;}.css-ylfa0c h6::before{content:" ";display:block;padding-top:30px;margin-bottom:40px;border-bottom:1px solid;border-bottom-color:var(--theme-ui-colors-borderColor);}</style><div class="css-ylfa0c"><style data-emotion="css-global 5u4lmb">:root{--ease-in-quad:cubic-bezier(0.55, 0.085, 0.68, 0.53);--ease-in-quart:cubic-bezier(0.895, 0.03, 0.685, 0.22);--ease-out-quad:cubic-bezier(0.25, 0.46, 0.45, 0.94);--ease-out-quart:cubic-bezier(0.165, 0.84, 0.44, 1);--ease-in-out-quad:cubic-bezier(0.455, 0.03, 0.515, 0.955);--ease-in-out-quart:cubic-bezier(0.77, 0, 0.175, 1);}*,*:before,*:after{box-sizing:inherit;}:root{box-sizing:border-box;}body{margin:0;}.gatsby-resp-image-image{width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;}</style><style data-emotion="css dl5fst">.css-dl5fst{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:start;-ms-flex-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:1rem 1rem;z-index:5;background:var(--theme-ui-colors-header);-webkit-transition:all 0.25s var(--ease-in-out-quad);transition:all 0.25s var(--ease-in-out-quad);border-bottom:1px solid var(--theme-ui-colors-borderColor);}@media (min-width: 38.73684210526316em){.css-dl5fst{position:fixed;top:0;left:0;right:0;padding:1rem 1.2rem;-webkit-transform:translateX(0);-moz-transform:translateX(0);-ms-transform:translateX(0);transform:translateX(0);}}</style><header class="css-dl5fst eneaom32"><style data-emotion="css 13apmpg">.css-13apmpg{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;margin:0;text-alight:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}</style><div class="css-13apmpg eneaom30"><style data-emotion="css 1gp7fjh">.css-1gp7fjh{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;margin-right:1rem;}@media (min-width: 38.73684210526316em){.css-1gp7fjh{display:none;}}</style><div class="css-1gp7fjh eneaom31"><style data-emotion="css i05np8">.css-i05np8{padding:0;background:none;border:none;color:var(--theme-ui-colors-text);cursor:pointer;font-size:0.8rem;}.css-i05np8:hover{color:var(--theme-ui-colors-primary);}</style><button type="button" aria-label="Open Navigation" title="Open Navigation" class="css-i05np8 e1onh9ai0"><style data-emotion="css z2vy6x">.css-z2vy6x{display:inline-block;width:30px;height:30px;}</style><span size="30" class="css-z2vy6x e1jw6cnh0"><style data-emotion="css 17rqqes">.css-17rqqes{fill:var(--theme-ui-colors-text);-webkit-transition:all 0.2s ease-out;transition:all 0.2s ease-out;}.css-17rqqes:hover,.css-17rqqes:focus{fill:var(--theme-ui-colors-primary);}</style><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="css-17rqqes e15jrc190"><path fill="none" d="M0 0h24v24H0V0z"></path><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"></path></svg></span></button></div><style data-emotion="css 13bl6n6">.css-13bl6n6{width:10rem;}.css-13bl6n6 p{margin:0;font-size:1.6rem;}</style><div class="css-13bl6n6 ewwdldv1"><style data-emotion="css o97vb3">.css-o97vb3{display:block;-webkit-text-decoration:none;text-decoration:none;color:var(--theme-ui-colors-text);-webkit-transition:color 0.2s ease-out;transition:color 0.2s ease-out;}.css-o97vb3:hover,.css-o97vb3:focus{color:var(--theme-ui-colors-primary);}</style><a class="css-o97vb3 ewwdldv0" href="/tietokannat/"><div data-gatsby-image-wrapper="" class="gatsby-image-wrapper gatsby-image-wrapper-constrained"><div style="max-width:2641px;display:block"><img alt="" role="presentation" aria-hidden="true" src="data:image/svg+xml;charset=utf-8,%3Csvg height=&#x27;1219&#x27; width=&#x27;2641&#x27; xmlns=&#x27;http://www.w3.org/2000/svg&#x27; version=&#x27;1.1&#x27;%3E%3C/svg%3E" style="max-width:100%;display:block;position:static"/></div><div aria-hidden="true" data-placeholder-image="" style="opacity:1;transition:opacity 500ms linear;background-color:#f8f8f8;position:absolute;top:0;left:0;bottom:0;right:0"></div><picture><source type="image/avif" data-srcset="/tietokannat/static/7c5268770640a4d118046a43d1aa9fe2/9469b/Centria-tunnus-RGB-FI-marginaalilla.avif 660w,/tietokannat/static/7c5268770640a4d118046a43d1aa9fe2/bb0ac/Centria-tunnus-RGB-FI-marginaalilla.avif 1321w,/tietokannat/static/7c5268770640a4d118046a43d1aa9fe2/7558a/Centria-tunnus-RGB-FI-marginaalilla.avif 2641w" sizes="(min-width: 2641px) 2641px, 100vw"/><source type="image/webp" data-srcset="/tietokannat/static/7c5268770640a4d118046a43d1aa9fe2/9ecf4/Centria-tunnus-RGB-FI-marginaalilla.webp 660w,/tietokannat/static/7c5268770640a4d118046a43d1aa9fe2/316a0/Centria-tunnus-RGB-FI-marginaalilla.webp 1321w,/tietokannat/static/7c5268770640a4d118046a43d1aa9fe2/93023/Centria-tunnus-RGB-FI-marginaalilla.webp 2641w" sizes="(min-width: 2641px) 2641px, 100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="opacity:0" sizes="(min-width: 2641px) 2641px, 100vw" decoding="async" loading="lazy" data-src="/tietokannat/static/7c5268770640a4d118046a43d1aa9fe2/0cf45/Centria-tunnus-RGB-FI-marginaalilla.jpg" data-srcset="/tietokannat/static/7c5268770640a4d118046a43d1aa9fe2/39f99/Centria-tunnus-RGB-FI-marginaalilla.jpg 660w,/tietokannat/static/7c5268770640a4d118046a43d1aa9fe2/844fa/Centria-tunnus-RGB-FI-marginaalilla.jpg 1321w,/tietokannat/static/7c5268770640a4d118046a43d1aa9fe2/0cf45/Centria-tunnus-RGB-FI-marginaalilla.jpg 2641w" alt="Centria banner"/></picture><noscript><picture><source type="image/avif" srcSet="/tietokannat/static/7c5268770640a4d118046a43d1aa9fe2/9469b/Centria-tunnus-RGB-FI-marginaalilla.avif 660w,/tietokannat/static/7c5268770640a4d118046a43d1aa9fe2/bb0ac/Centria-tunnus-RGB-FI-marginaalilla.avif 1321w,/tietokannat/static/7c5268770640a4d118046a43d1aa9fe2/7558a/Centria-tunnus-RGB-FI-marginaalilla.avif 2641w" sizes="(min-width: 2641px) 2641px, 100vw"/><source type="image/webp" srcSet="/tietokannat/static/7c5268770640a4d118046a43d1aa9fe2/9ecf4/Centria-tunnus-RGB-FI-marginaalilla.webp 660w,/tietokannat/static/7c5268770640a4d118046a43d1aa9fe2/316a0/Centria-tunnus-RGB-FI-marginaalilla.webp 1321w,/tietokannat/static/7c5268770640a4d118046a43d1aa9fe2/93023/Centria-tunnus-RGB-FI-marginaalilla.webp 2641w" sizes="(min-width: 2641px) 2641px, 100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="opacity:0" sizes="(min-width: 2641px) 2641px, 100vw" decoding="async" loading="lazy" src="/tietokannat/static/7c5268770640a4d118046a43d1aa9fe2/0cf45/Centria-tunnus-RGB-FI-marginaalilla.jpg" srcSet="/tietokannat/static/7c5268770640a4d118046a43d1aa9fe2/39f99/Centria-tunnus-RGB-FI-marginaalilla.jpg 660w,/tietokannat/static/7c5268770640a4d118046a43d1aa9fe2/844fa/Centria-tunnus-RGB-FI-marginaalilla.jpg 1321w,/tietokannat/static/7c5268770640a4d118046a43d1aa9fe2/0cf45/Centria-tunnus-RGB-FI-marginaalilla.jpg 2641w" alt="Centria banner"/></picture></noscript><script type="module">const t="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;if(t){const t=document.querySelectorAll("img[data-main-image]");for(let e of t){e.dataset.src&&(e.setAttribute("src",e.dataset.src),e.removeAttribute("data-src")),e.dataset.srcset&&(e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset"));const t=e.parentNode.querySelectorAll("source[data-srcset]");for(let e of t)e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset");e.complete&&(e.style.opacity=1)}}</script></div></a></div></div></header><style data-emotion="css pn4xbf">.css-pn4xbf{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;min-height:100vh;position:relative;overflow-x:hidden;background:var(--theme-ui-colors-background);-webkit-transition:background 0.25s var(--ease-in-out-quad);transition:background 0.25s var(--ease-in-out-quad);}</style><div class="css-pn4xbf e1krdi8y3"><style data-emotion="css 1oex1pb">.css-1oex1pb{margin-left:-19rem;-webkit-flex:0 0 19rem;-ms-flex:0 0 19rem;flex:0 0 19rem;font-size:0.875rem;}@media (min-width: 38.73684210526316em){.css-1oex1pb{margin-left:0;}}</style><aside class="css-1oex1pb ednv8641"><style data-emotion="css 1wrooys">.css-1wrooys{position:fixed;top:0;bottom:0;overflow-x:hidden;overflow-y:auto;width:19rem;height:100%;padding:1rem 0;background:var(--theme-ui-colors-sidebar);-webkit-transition:0.25s var(--ease-in-out-quad);transition:0.25s var(--ease-in-out-quad);}@media (min-width: 38.73684210526316em){.css-1wrooys{-webkit-transform:translateX(0);-moz-transform:translateX(0);-ms-transform:translateX(0);transform:translateX(0);padding:6.6rem 0 1rem;}}</style><nav class="css-1wrooys ednv8640"><style data-emotion="css pv1s1f">.css-pv1s1f{margin:0;padding:0;list-style:none;}</style><ul class="css-pv1s1f e1dzqqml0"><style data-emotion="css 1lbpo2j">.css-1lbpo2j{position:relative;display:block;padding:0;margin:0.2rem 0;width:100%;list-style:none;}</style><li class="css-1lbpo2j eo1v1f02"><style data-emotion="css 2kw81a">.css-2kw81a{margin:0.5rem 0 0.5rem 1.2rem;padding:0;list-style:none;}.css-2kw81a>li{margin:0;}</style><ul class="css-2kw81a eo1v1f00"><li class="css-1lbpo2j eo1v1f02"><style data-emotion="css zl329z">.css-zl329z{display:block;padding:0.5rem 1.8rem 0.5rem 1.2rem;width:100%;color:var(--theme-ui-colors-text);font-weight:600;-webkit-text-decoration:none;text-decoration:none;-webkit-transition:color 0.2s ease-out;transition:color 0.2s ease-out;}.css-zl329z:hover,.css-zl329z:focus,.css-zl329z.is-active{color:var(--theme-ui-colors-primary);}</style><a class="css-zl329z eo1v1f01" href="/tietokannat/johdanto">Johdanto</a></li><li class="css-1lbpo2j eo1v1f02"><a class="css-zl329z eo1v1f01" href="/tietokannat/alkeet">SQL:n alkeet</a></li><li class="css-1lbpo2j eo1v1f02"><a class="css-zl329z eo1v1f01" href="/tietokannat/monta-taulua">Monta taulua</a></li><li class="css-1lbpo2j eo1v1f02"><a class="css-zl329z eo1v1f01" href="/tietokannat/lisaa-tekniikoita">Lisää tekniikoita</a></li><li class="css-1lbpo2j eo1v1f02"><a aria-current="page" class="css-zl329z eo1v1f01 is-active" href="/tietokannat/suunnittelu">Tietokantojen suunnittelua</a></li><li class="css-1lbpo2j eo1v1f02"><a class="css-zl329z eo1v1f01" href="/tietokannat/tiedon-eheys">Tiedon eheys</a></li><li class="css-1lbpo2j eo1v1f02"><a class="css-zl329z eo1v1f01" href="/tietokannat/tehokkuus">Tehokkuus</a></li><li class="css-1lbpo2j eo1v1f02"><a class="css-zl329z eo1v1f01" href="/tietokannat/tehtavat">Tehtävät ja koe</a></li></ul></li></ul></nav></aside><style data-emotion="css 1a5xr11">.css-1a5xr11{-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;min-width:20rem;padding-bottom:5rem;}</style><div class="css-1a5xr11 e1krdi8y2"><style data-emotion="css 1ni6xgg">.css-1ni6xgg{margin:auto;padding:2rem 1rem 2.5rem;-webkit-transition:0.25s var(--ease-in-out-quad);transition:0.25s var(--ease-in-out-quad);opacity:1;}@media (min-width: 38.73684210526316em){.css-1ni6xgg{-webkit-transform:translateX(0);-moz-transform:translateX(0);-ms-transform:translateX(0);transform:translateX(0);opacity:1;padding:7rem 3rem 3rem;max-width:50rem;}}</style><main class="css-1ni6xgg e1krdi8y1"><style data-emotion="css 1daj6ng">.css-1daj6ng{padding-top:0;margin-top:0;}.css-1daj6ng::before{display:none!important;}</style><h1 class="css-1daj6ng e137ubq00">Tietokantojen suunnittelua</h1><style data-emotion="css 1up8dbe">.css-1up8dbe{font-family:-apple-system,BlinkMacSystemFont,San Francisco,Helvetica Neue,Helvetica,Ubuntu,Roboto,Noto,Segoe UI,Arial,sans-serif;line-height:1.125;font-weight:700;margin-top:0;margin-bottom:16px;font-size:36px;}.css-1up8dbe::before{content:" ";display:block;padding-top:30px;margin-bottom:40px;border-bottom:1px solid;border-bottom-color:var(--theme-ui-colors-borderColor);}</style><h1 id="suunnittelun-periaatteet" class="css-1up8dbe">Suunnittelun periaatteet</h1><style data-emotion="css zitybv">.css-zitybv{margin-top:32px;margin-bottom:32px;}</style><p class="css-zitybv">Tietokannan suunnittelussa meidän tulee päättää tietokannan rakenne: mitä tauluja tietokannassa on sekä mitä sarakkeita kussakin taulussa on. Tähän on sinänsä suuri määrä mahdollisuuksia, mutta tuntemalla muutaman periaatteen pääsee pitkälle.</p><p class="css-zitybv">Hyvä tavoite suunnittelussa on, että tuloksena olevaa tietokantaa on mukavaa käyttää SQL-kielen avulla. Tietokannan rakenteen tulisi olla sellainen, että pystymme hakemaan ja muuttamaan tietoa näppärästi SQL-komennoilla.</p><p class="css-zitybv">Tässä ovat neljä tietokannan sunnittelun periaatetta:</p><style data-emotion="css vq3asz">.css-vq3asz{font-family:-apple-system,BlinkMacSystemFont,San Francisco,Helvetica Neue,Helvetica,Ubuntu,Roboto,Noto,Segoe UI,Arial,sans-serif;line-height:1.125;font-weight:700;margin-top:0;margin-bottom:16px;font-size:28px;}.css-vq3asz::before{content:" ";display:block;padding-top:30px;margin-bottom:40px;border-bottom:1px solid;border-bottom-color:var(--theme-ui-colors-borderColor);}</style><h2 id="periaate-1" class="css-vq3asz">Periaate 1</h2><p class="css-zitybv">Taulut ja niiden sarakkeet ovat kiinteitä, ja tietokannan käyttäjä tekee muutoksia vain riveihin. Kaikki samanlaista tietoa sisältävät rivit ovat samassa taulussa.</p><h2 id="periaate-2" class="css-vq3asz">Periaate 2</h2><p class="css-zitybv">Jokainen sarake sisältää yksittäistä dataa, kuten kokonaisluvun tai tekstiä, mutta ei listaa asioista. Lista talletetaan omaksi taululukseen siten, että jokainen elementti on oma rivinsä.</p><h2 id="periaate-3" class="css-vq3asz">Periaate 3</h2><p class="css-zitybv">Jokainen tietue on tietokannassa tasan kerran. Muualla tähän tietoon viitataan pääavaimella.</p><h2 id="periaate-4" class="css-vq3asz">Periaate 4</h2><p class="css-zitybv">Tietokanta ei sisällä tietoa, joka voidaan laskea tai päätellä muusta tietokannan sisällöstä.</p><h2 id="esimerkki" class="css-vq3asz">Esimerkki</h2><p class="css-zitybv">Tarkastellaan tilannetta, jossa verkkosivulla on käyttäjiä ja jokaisella käyttäjällä on lista ystäviä. Tässä näemme melko huonosti suunnitellun taulun <style data-emotion="css 1eipsn1">.css-1eipsn1{color:var(--theme-ui-colors-primary);background:rgba(233, 218, 172, 0.15);border-radius:3px;padding-left:0.4rem;padding-right:0.4rem;padding-top:0.2rem;padding-bottom:0.2rem;}</style><code class="css-1eipsn1">Users</code>, joka sisältää tietoa käyttäjistä ja heidän ystävistään:</p><style data-emotion="css 14vuu3">.css-14vuu3{background-color:#282c34;color:#ffffff;font-family:"Operator Mono",monospace;font-size:0.9rem;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;overflow:auto;border-radius:6px;padding:16px;margin-top:32px;margin-bottom:32px;}.css-14vuu3 .attr-name{color:#c5a5c5;}.css-14vuu3 .attr-value{color:#8dc891;}.css-14vuu3 .comment,.css-14vuu3 .block-comment,.css-14vuu3 .prolog,.css-14vuu3 .doctype,.css-14vuu3 .cdata,.css-14vuu3 .shebang{color:#999999;}.css-14vuu3 .property,.css-14vuu3 .number,.css-14vuu3 .function-name,.css-14vuu3 .constant,.css-14vuu3 .symbol,.css-14vuu3 .deleted{color:#5a9bcf;}.css-14vuu3 .boolean{color:#ff8b50;}.css-14vuu3 .tag{color:#fc929e;}.css-14vuu3 .string{color:#8dc891;}.css-14vuu3 .punctuation{color:#8dc891;}.css-14vuu3 .selector,.css-14vuu3 .char,.css-14vuu3 .builtin,.css-14vuu3 .inserted{color:#D8DEE9;}.css-14vuu3 .function{color:#79b6f2;}.css-14vuu3 .operator,.css-14vuu3 .entity,.css-14vuu3 .url,.css-14vuu3 .variable{color:#d7deea;}.css-14vuu3 .keyword{color:#c5a5c5;}.css-14vuu3 .at-rule,.css-14vuu3 .class-name{color:#FAC863;}.css-14vuu3 .important{font-weight:400;}.css-14vuu3 .bold{font-weight:700;}.css-14vuu3 .italic{font-style:italic;}.css-14vuu3 .namespace{opacity:0.7;}.css-14vuu3 .highlight{background-color:var(--theme-ui-colors-highlight);font-weight:700;}</style><style data-emotion="css 1itelf7">.css-1itelf7{background-color:#282c34;color:#ffffff;font-family:"Operator Mono",monospace;font-size:0.9rem;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;overflow:auto;border-radius:6px;padding:16px;margin-top:32px;margin-bottom:32px;}.css-1itelf7 .attr-name{color:#c5a5c5;}.css-1itelf7 .attr-value{color:#8dc891;}.css-1itelf7 .comment,.css-1itelf7 .block-comment,.css-1itelf7 .prolog,.css-1itelf7 .doctype,.css-1itelf7 .cdata,.css-1itelf7 .shebang{color:#999999;}.css-1itelf7 .property,.css-1itelf7 .number,.css-1itelf7 .function-name,.css-1itelf7 .constant,.css-1itelf7 .symbol,.css-1itelf7 .deleted{color:#5a9bcf;}.css-1itelf7 .boolean{color:#ff8b50;}.css-1itelf7 .tag{color:#fc929e;}.css-1itelf7 .string{color:#8dc891;}.css-1itelf7 .punctuation{color:#8dc891;}.css-1itelf7 .selector,.css-1itelf7 .char,.css-1itelf7 .builtin,.css-1itelf7 .inserted{color:#D8DEE9;}.css-1itelf7 .function{color:#79b6f2;}.css-1itelf7 .operator,.css-1itelf7 .entity,.css-1itelf7 .url,.css-1itelf7 .variable{color:#d7deea;}.css-1itelf7 .keyword{color:#c5a5c5;}.css-1itelf7 .at-rule,.css-1itelf7 .class-name{color:#FAC863;}.css-1itelf7 .important{font-weight:400;}.css-1itelf7 .bold{font-weight:700;}.css-1itelf7 .italic{font-style:italic;}.css-1itelf7 .namespace{opacity:0.7;}.css-1itelf7 .highlight{background-color:var(--theme-ui-colors-highlight);font-weight:700;}</style><pre class="prism-code language-css-0 css-1itelf7"><div class="token-line"><span class="token plain">id          username    friends       total</span></div><div class="token-line"><span class="token plain">----------  ----------  ------------  ----------</span></div><div class="token-line"><span class="token plain">1           uolevi      maija,liisa   2</span></div><div class="token-line"><span class="token plain">2           maija       aapeli        1</span></div><div class="token-line"><span class="token plain">3           liisa                     0</span></div><div class="token-line"><span class="token plain">4           aapeli      uolevi,maija  2</span></div></pre><p class="css-zitybv">Ajatuksena tässä taulussa on, että sarake <code class="css-1eipsn1">friends</code> sisältää listan ystävistä tekstinä, jossa ystävien käyttäjätunnukset (<code class="css-1eipsn1">username</code>) ovat eroteltu pilkuin. Lisäksi, sarakkeessa <code class="css-1eipsn1">total</code> on annettu ystävien kokonaismäärä.</p><p class="css-zitybv">Tällä rakenteella rikomme periaatteita 2-4, mutta nyt meillä on mahdollisuus parantaa tietokantaa ja pohtia, mihin periaatteet pohjautuvat.</p><h2 id="parannus-1" class="css-vq3asz">Parannus 1</h2><p class="css-zitybv">Tietokanta rikkoo periaatetta 2, sillä sarake <code class="css-1eipsn1">friends</code> sisältää listan ystävistä. Ongelmana tässä sarakkeessa on, että sitä on hankala käsitellä SQL-komennoilla. Esimerkiksi miten saamme selville, ketkä kaikki ovat lisänneet Maijan ystäväkseen?</p><p class="css-zitybv">Ratkaisuna on poistaa sarake <code class="css-1eipsn1">friends</code> ja luodaan uusi taulu <code class="css-1eipsn1">Friends</code>, jossa jokainen rivi on ystävyyssuhde muorossa &quot;<code class="css-1eipsn1">käyttäjällä X on käyttäjä Y kaverilistallaan</code>&quot;:</p><pre class="prism-code language-css-0 css-1itelf7"><div class="token-line"><span class="token plain">user        friend</span></div><div class="token-line"><span class="token plain">----------  ----------</span></div><div class="token-line"><span class="token plain">uolevi      maija</span></div><div class="token-line"><span class="token plain">uolevi      liisa</span></div><div class="token-line"><span class="token plain">maija       aapeli</span></div><div class="token-line"><span class="token plain">aapeli      uolevi</span></div><div class="token-line"><span class="token plain">aapeli      maija</span></div></pre><p class="css-zitybv">Nyt taulu <code class="css-1eipsn1">Users</code> näyttää tältä:</p><pre class="prism-code language-css-0 css-1itelf7"><div class="token-line"><span class="token plain">id          username      total</span></div><div class="token-line"><span class="token plain">----------  ----------  ----------</span></div><div class="token-line"><span class="token plain">1           uolevi      2</span></div><div class="token-line"><span class="token plain">2           maija       1</span></div><div class="token-line"><span class="token plain">3           liisa       0</span></div><div class="token-line"><span class="token plain">4           aapeli      2</span></div></pre><p class="css-zitybv">Nyt voimme helposti ratkaista, keiden listoilla Maija on:</p><pre class="language-sql prism-code language-sql css-1itelf7"><div class="token-line"><span class="token keyword">SELECT</span><span class="token plain"> </span><span class="token keyword">user</span><span class="token plain"> </span><span class="token keyword">FROM</span><span class="token plain"> Friends </span><span class="token keyword">WHERE</span><span class="token plain"> friend</span><span class="token operator">=</span><span class="token string">&#x27;maija&#x27;</span><span class="token punctuation">;</span></div></pre><h2 id="parannus-2" class="css-vq3asz">Parannus 2</h2><p class="css-zitybv">Uusi taulu <code class="css-1eipsn1">Friends</code> on hyvä, mutta se rikkoo periaatetta 3, sillä käyttäjänimet ovat nyt useassa paikassa. Ongelmana on, että käyttäjänimen muuttuessa, joudume etsimään kaikki paikat jossa käyttäjänimeä on käytetty.</p><p class="css-zitybv">Ratkaisuna on muuttaa taulu <code class="css-1eipsn1">Friends</code> käyttämään viitteitä. Nyt taulu näyttää tältä:</p><pre class="prism-code language-css-0 css-1itelf7"><div class="token-line"><span class="token plain">user_id      friend_id</span></div><div class="token-line"><span class="token plain">-----------  ----------</span></div><div class="token-line"><span class="token plain">1            2</span></div><div class="token-line"><span class="token plain">1            3</span></div><div class="token-line"><span class="token plain">2            4</span></div><div class="token-line"><span class="token plain">4            1</span></div><div class="token-line"><span class="token plain">4            2</span></div></pre><p class="css-zitybv">Huomaa, tämän myötä on hankalampaa löytää keiden listoilla Maija on, koska joudumme hakemaan käyttäjänimet taulusta <code class="css-1eipsn1">Users</code>:</p><pre class="language-sql prism-code language-sql css-1itelf7"><div class="token-line"><span class="token keyword">SELECT</span><span class="token plain"> A</span><span class="token punctuation">.</span><span class="token plain">username</span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">FROM</span><span class="token plain"> Users A</span><span class="token punctuation">,</span><span class="token plain"> Users B</span><span class="token punctuation">,</span><span class="token plain"> Friends K</span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">WHERE</span><span class="token plain"> A</span><span class="token punctuation">.</span><span class="token plain">id </span><span class="token operator">=</span><span class="token plain"> K</span><span class="token punctuation">.</span><span class="token plain">user_id </span><span class="token operator">AND</span><span class="token plain"> B</span><span class="token punctuation">.</span><span class="token plain">id </span><span class="token operator">=</span><span class="token plain"> K</span><span class="token punctuation">.</span><span class="token plain">friend_id </span><span class="token operator">AND</span><span class="token plain"> B</span><span class="token punctuation">.</span><span class="token plain">username </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string">&#x27;maija&#x27;</span><span class="token punctuation">;</span></div></pre><p class="css-zitybv">Tästä huolimatta muutos on järkevä, sillä käyttäjänimiä käytetään nyt vain kerran, taulussa <code class="css-1eipsn1">Users</code>.</p><h2 id="parannus-3" class="css-vq3asz">Parannus 3</h2><p class="css-zitybv">Tietokanta rikkoo edelleen periaatetta 4, sillä sarake <code class="css-1eipsn1">total</code> pystytään laskemaan taulusta <code class="css-1eipsn1">Friends</code>. Se on oikein näppärä sarake, sillä tällä hetkellä voimme esimerkiksi hakea Uolevin ystävät seuraavasti:</p><pre class="language-sql prism-code language-sql css-1itelf7"><div class="token-line"><span class="token keyword">SELECT</span><span class="token plain"> total </span><span class="token keyword">FROM</span><span class="token plain"> Users </span><span class="token keyword">WHERE</span><span class="token plain"> username</span><span class="token operator">=</span><span class="token string">&#x27;uolevi&#x27;</span><span class="token punctuation">;</span></div></pre><p class="css-zitybv">Ongelmana tosin on, että joka kerta ystävien muuttuessa, meidän pitäisi päivittää myös saraketta <code class="css-1eipsn1">total</code>. Parempi ratkaisu on poistaa koko sarake taulusta:le:</p><pre class="prism-code language-css-0 css-1itelf7"><div class="token-line"><span class="token plain">id          username    </span></div><div class="token-line"><span class="token plain">----------  ----------</span></div><div class="token-line"><span class="token plain">1           uolevi    </span></div><div class="token-line"><span class="token plain">2           maija     </span></div><div class="token-line"><span class="token plain">3           liisa     </span></div><div class="token-line"><span class="token plain">4           aapeli</span></div></pre><p class="css-zitybv">Vaikka saraketta ei enää ole, voimme silti laskea ystävien määrän täten:</p><pre class="language-sql prism-code language-sql css-1itelf7"><div class="token-line"><span class="token keyword">SELECT</span><span class="token plain"> </span><span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">FROM</span><span class="token plain"> Users A</span><span class="token punctuation">,</span><span class="token plain"> Friends K</span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">WHERE</span><span class="token plain"> A</span><span class="token punctuation">.</span><span class="token plain">username</span><span class="token operator">=</span><span class="token string">&#x27;uolevi&#x27;</span><span class="token plain"> </span><span class="token operator">AND</span><span class="token plain"> k</span><span class="token punctuation">.</span><span class="token keyword">user</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> A</span><span class="token punctuation">.</span><span class="token plain">id</span><span class="token punctuation">;</span></div></pre><h1 id="normalisointi-normalization" class="css-1up8dbe">Normalisointi (Normalization)</h1><p class="css-zitybv">Tietokannan teoriassa puhutaan usein termistä <em class="css-0">normalisointi (normalization)</em>, jonka avulla tietokannan rakennetta parannetaan. Tämä tapahtuu muuttamalla tietokannan rakennetta siten, että se vastaa tiettyjä <em class="css-0">normaalimuotoja (normal forms</em>.</p><p class="css-zitybv">Käytännössä, normalisointi johtaa samoihin tuloksiin kuin yllä olevat periaatteet, mutta normaalimuotojen vaatimukset ovat hieman tulkinnanvaraiset. Jos haluat käyttää hieman aikaa tietokantojen teoriaan, kannattaa tutustua tarkemmin normaalimuotoihin. Muutoin yllä olevat periaatteet ovat melkoisen riittävät.</p><h1 id="tiedon-kuvailu" class="css-1up8dbe">Tiedon kuvailu</h1><p class="css-zitybv">Seuraavaksi käsittelemme kaksi tapaa kuvailla tietokannan rakennetta. Graafinen kuvaus näyttää tietokannan taulut, sarakkeet ja viitteet niiden välillä, kun taas SQL-skeema näyttää tietokannan luomiseen käytetyt SQL-komennot.</p><h2 id="tietokantakaavio-database-diagram" class="css-vq3asz">Tietokantakaavio (Database diagram)</h2><p class="css-zitybv">Tietokantakaavio on graafinen esitys tietokannasta, jossa jokainen taulu on laatikko joka sisältää taulun nimen ja sarakkeet listana. Viittaukset rivien välillä näytetään yhteyksinä laatikoiden välillä.</p><p class="css-zitybv">Tietokantakaavion piirtämiseen on monia vähän erilaisia tapoja. Seuraava kaavio on luotu netissä olevalla työkalulla <style data-emotion="css 1b33xzc">.css-1b33xzc{color:var(--theme-ui-colors-primary);-webkit-transition:color 0.2s ease-out;transition:color 0.2s ease-out;}.css-1b33xzc:hover,.css-1b33xzc:focus{color:var(--theme-ui-colors-text);}</style><a href="https://dbdiagram.io/d" class="css-1b33xzc">https://dbdiagram.io/</a>:</p><p class="css-zitybv"><img src="https://raw.githubusercontent.com/centria/tietokannat/master/src/images/diagram_new.png" alt="Database diagram of a simple three table Database" class="css-0"/> </p><p class="css-zitybv">Tässä merkki <code class="css-1eipsn1">1</code> tarkoittaa, että sarakkeessa on eri arvo joka rivillä, ja merkki <code class="css-1eipsn1">*</code> puolestaan tarkoittaa, että sarakkeessa voi olla sama arvo usealla rivillä. Esimerkiksi taulussa <code class="css-1eipsn1">Products</code> jokaisella rivillä on eri <code class="css-1eipsn1">id</code>, mutta taulussa <code class="css-1eipsn1">Purchases</code> usealla rivillä voi olla sama <code class="css-1eipsn1">product_id</code>.</p><h2 id="sql-skeema-sql-schema" class="css-vq3asz">SQL-skeema (SQL schema)</h2><p class="css-zitybv">SQL-skeema on tekstiesitys tietokannasta, joka antaa komennot joita tarvittiin tietokannan luomiseen. Hyvä puoli tässä esitysmuodossa on, että se on ehdottoman tarkka, ja voimme luoda tietokannan uudelleen niin halutessamme.</p><p class="css-zitybv">Esimerkiksi yllä olevan tietokannan skeema olisi seuraava:</p><pre class="language-sql prism-code language-sql css-1itelf7"><div class="token-line"><span class="token keyword">CREATE</span><span class="token plain"> </span><span class="token keyword">TABLE</span><span class="token plain"> Products </span><span class="token punctuation">(</span><span class="token plain">id </span><span class="token keyword">INTEGER</span><span class="token plain"> </span><span class="token keyword">PRIMARY</span><span class="token plain"> </span><span class="token keyword">KEY</span><span class="token punctuation">,</span><span class="token plain"> name </span><span class="token keyword">TEXT</span><span class="token punctuation">,</span><span class="token plain"> price </span><span class="token keyword">INTEGER</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">CREATE</span><span class="token plain"> </span><span class="token keyword">TABLE</span><span class="token plain"> Customers </span><span class="token punctuation">(</span><span class="token plain">id </span><span class="token keyword">INTEGER</span><span class="token plain"> </span><span class="token keyword">PRIMARY</span><span class="token plain"> </span><span class="token keyword">KEY</span><span class="token punctuation">,</span><span class="token plain"> name </span><span class="token keyword">TEXT</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">CREATE</span><span class="token plain"> </span><span class="token keyword">TABLE</span><span class="token plain"> Purchases </span><span class="token punctuation">(</span><span class="token plain">product_id </span><span class="token keyword">INTEGER</span><span class="token punctuation">,</span><span class="token plain"> customer_id </span><span class="token keyword">INTEGER</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></pre><p class="css-zitybv">Oletetaan tämän skeeman olevan tiedostossa <code class="css-1eipsn1">depiction.sql</code>. Voimme luoda tietokannan SQLite-tulkilla komennolla <code class="css-1eipsn1">.read</code>: </p><pre class="prism-code language-css-0 css-1itelf7"><div class="token-line"><span class="token plain">sqlite&gt; .read depiction.sql</span></div><div class="token-line"><span class="token plain">sqlite&gt; .tables</span></div><div class="token-line"><span class="token plain">Customers  Purchases   Products</span></div></pre><p class="css-zitybv">Toisaalta voimme myös käyttää komentoa <code class="css-1eipsn1">.schema</code> SQLite-tulkissa, joka palauttaa tämänhetkisen skeeman:</p><pre class="prism-code language-css-0 css-1itelf7"><div class="token-line"><span class="token plain">sqlite&gt; .schema</span></div><div class="token-line"><span class="token plain">CREATE TABLE Products (id INTEGER PRIMARY KEY, name TEXT, price INTEGER);</span></div><div class="token-line"><span class="token plain">CREATE TABLE Customers (id INTEGER PRIMARY KEY, name TEXT);</span></div><div class="token-line"><span class="token plain">CREATE TABLE Purchases (product_id INTEGER, customer_id INTEGER);</span></div></pre><h1 id="tietokannan-muuttaminen" class="css-1up8dbe">Tietokannan muuttaminen</h1><p class="css-zitybv">Käytännössä on epätavallista että tietokanta suunnitellaan ensin, ja että se pysyisi muuttumattomana maailmanloppuun asti. On paljon yleisempää, että tietokannan rakenne muuttuu silloin tällöin.</p><h2 id="muutosten-tekeminen" class="css-vq3asz">Muutosten tekeminen</h2><p class="css-zitybv">Yksinkertainen muutos on uuden taulun lisääminen tietokantaan. Tässä tapauksessa voimme lisätä taulun komennolla <code class="css-1eipsn1">CREATE TABLE</code> kuten tavallisesti.</p><p class="css-zitybv">Voimme myös muokata olemassaolevan taulun rakennetta komennolla <code class="css-1eipsn1">ALTER TABLE</code>. Tällä komennolla on useita käyttötarkoituksia, riippuen siitä mitä haluamme tehdä. Voimme esimerkiksi lisätä sarakkeen komennolla <code class="css-1eipsn1">ADD COLUMN</code>.</p><p class="css-zitybv">Tarkastellaan taulua <code class="css-1eipsn1">Customers</code>:</p><pre class="prism-code language-css-0 css-1itelf7"><div class="token-line"><span class="token plain">id           name</span></div><div class="token-line"><span class="token plain">-----------  ----------</span></div><div class="token-line"><span class="token plain">1            Uolevi</span></div><div class="token-line"><span class="token plain">2            Maija</span></div><div class="token-line"><span class="token plain">3            Aapeli</span></div></pre><p class="css-zitybv">Kun haluamme lisätä uuden sarakkeen <code class="css-1eipsn1">address</code>, voimme ajaa seuraavan komennon:</p><pre class="language-sql prism-code language-sql css-1itelf7"><div class="token-line"><span class="token keyword">ALTER</span><span class="token plain"> </span><span class="token keyword">TABLE</span><span class="token plain"> Customers </span><span class="token keyword">ADD</span><span class="token plain"> </span><span class="token keyword">COLUMN</span><span class="token plain"> address </span><span class="token keyword">TEXT</span><span class="token punctuation">;</span></div></pre><p class="css-zitybv">Tämän seurauksena taulumme näyttää tältä:</p><pre class="prism-code language-css-0 css-1itelf7"><div class="token-line"><span class="token plain">id           name        address</span></div><div class="token-line"><span class="token plain">-----------  ----------  ----------</span></div><div class="token-line"><span class="token plain">1            Uolevi</span></div><div class="token-line"><span class="token plain">2            Maija</span></div><div class="token-line"><span class="token plain">3            Aapeli</span></div></pre><p class="css-zitybv">Koska lisäsimme uuden sarakkeen, olemassaolevilla riveillä ei ole tietoa siinä sarakkeessa. Tietoa voidaan päivittää tämän jälkeen komennolla <code class="css-1eipsn1">UPDATE</code>.</p><p class="css-zitybv">Komennon <code class="css-1eipsn1">ALTER TABLE</code> käyttö riippuu tietokantajärjestelmästä, ja jälleen kerran tieto löytyy käytössä olevan järjestelmän dokumentaatiosta. SQLitessä komento on melko rajattu, verrattuna esimerkiksi PostgreSQL:ään.</p><h2 id="muutoksen-haasteet" class="css-vq3asz">Muutoksen haasteet</h2><p class="css-zitybv">Olemassaolevan tietokannan muutoksissa on yksi ongelma: Tietokannassa on yleensä tietoja ja se on käytössä jossain sovelluksessa. Kuinka voimme toteuttaa muutokset siten, että ne eivät vaikuta järjestelmän toimivuuteen?</p><p class="css-zitybv">Taulun tai sarakkeen lisääminen ovat yleensä melko helppoja muutoksia, sillä ne eivät vaikuta tietokannan käyttämiseen vanhalla tavalla, mutta haastavampia muutoksia ovat esimerkiksi sarakkeen poistaminen tai uudelleenimeäminen.</p><p class="css-zitybv">Yksi hyvä periaate on tehdä muutokset vaiheittain, askel kerrallaan. Esimerkiksi, jos tarvitsee muuttaa sarakkeen nimeä, voit tehdä sen näin:</p><ol class="css-0"><li class="css-0">Lisää uusi sarake vanhan sarakkeen rinnalle </li><li class="css-0">Muuta <em class="css-0">tietoa kirjoittavat</em> SQL-komennot siten, että ne kirjoittavat sekä vanhaan että uuteen sarakkeeseen.</li><li class="css-0">Kopioi data vanhan sarakkeen riveiltä uuden sarakkeen vastaaviin.</li><li class="css-0">Muuta <em class="css-0">tietoa lukevat</em> SQL-komennot siten, että ne lukevat uudesta sarakkeesta.</li><li class="css-0">Mutta <em class="css-0">tietoa kirjoittavat</em> SQL-komennot siten, että ne kirjoittavat vain uuteen sarakkeeseen.</li><li class="css-0">Poista vanha sarake taulusta.</li></ol><p class="css-zitybv">Tällä menetelmällä järjestelmä pystyy käyttämään tietokantaa koko ajan, ja tietokannan käyttäjät eivät huomaa muutosta. Prosessin lopuksi sarakkeen nimi on muutettu uudeksi.</p><h1 id="migraatio-migration" class="css-1up8dbe">Migraatio (Migration)</h1><p class="css-zitybv">Termi <em class="css-0">migraatio</em> voi tarkoittaa joko tietokannan rakenteen muuttamista tai tietokannan siirtämistä toiseen sijaintiin. Tämä on valitettavasti kurssimme tavoitteiden ulkopuolella..</p></main></div><style data-emotion="css 7oi17p">.css-7oi17p{display:none;-webkit-flex:0 0 16rem;-ms-flex:0 0 16rem;flex:0 0 16rem;font-size:0.75rem;font-weight:600;}@media (min-width: 56.36842105263158em){.css-7oi17p{display:block;}}</style><aside class="css-7oi17p e18xy85f4"><style data-emotion="css dxzn2c">.css-dxzn2c{position:fixed;top:0;bottom:0;overflow-x:hidden;overflow-y:auto;width:16rem;height:100%;padding:7rem 1rem 0;}</style><nav class="css-dxzn2c e18xy85f3"><style data-emotion="css 1w6ve1a">.css-1w6ve1a{margin-top:0;font-size:0.7rem;font-weight:700;text-transform:uppercase;}</style><p class="css-1w6ve1a e18xy85f2">Contents</p><style data-emotion="css evawql">.css-evawql{margin:0;padding:0;list-style:none;}.css-evawql ul{margin:0;padding:0;list-style:none;}</style><ul class="css-evawql e18xy85f1"><style data-emotion="css 1uvgd5">.css-1uvgd5{margin:0.3rem 0;}</style><li class="css-1uvgd5 e18xy85f0"><style data-emotion="css 1j0udpt">.css-1j0udpt{display:inline-block;padding:0.2rem 0;width:100%;color:var(--theme-ui-colors-text);-webkit-text-decoration:none;text-decoration:none;-webkit-transition:color 0.2s ease-out;transition:color 0.2s ease-out;}.css-1j0udpt:hover,.css-1j0udpt:focus{color:var(--theme-ui-colors-primary);}</style><a href="/tietokannat/suunnittelu#suunnittelun-periaatteet" class="css-1j0udpt e1r4v4s10">Suunnittelun periaatteet</a></li><li class="css-1uvgd5 e18xy85f0"><a href="/tietokannat/suunnittelu#periaate-1" class="css-1j0udpt e1r4v4s10">Periaate 1</a></li><li class="css-1uvgd5 e18xy85f0"><a href="/tietokannat/suunnittelu#periaate-2" class="css-1j0udpt e1r4v4s10">Periaate 2</a></li><li class="css-1uvgd5 e18xy85f0"><a href="/tietokannat/suunnittelu#periaate-3" class="css-1j0udpt e1r4v4s10">Periaate 3</a></li><li class="css-1uvgd5 e18xy85f0"><a href="/tietokannat/suunnittelu#periaate-4" class="css-1j0udpt e1r4v4s10">Periaate 4</a></li><li class="css-1uvgd5 e18xy85f0"><a href="/tietokannat/suunnittelu#esimerkki" class="css-1j0udpt e1r4v4s10">Esimerkki</a></li><li class="css-1uvgd5 e18xy85f0"><a href="/tietokannat/suunnittelu#parannus-1" class="css-1j0udpt e1r4v4s10">Parannus 1</a></li><li class="css-1uvgd5 e18xy85f0"><a href="/tietokannat/suunnittelu#parannus-2" class="css-1j0udpt e1r4v4s10">Parannus 2</a></li><li class="css-1uvgd5 e18xy85f0"><a href="/tietokannat/suunnittelu#parannus-3" class="css-1j0udpt e1r4v4s10">Parannus 3</a></li><li class="css-1uvgd5 e18xy85f0"><a href="/tietokannat/suunnittelu#normalisointi-normalization" class="css-1j0udpt e1r4v4s10">Normalisointi (Normalization)</a></li><li class="css-1uvgd5 e18xy85f0"><a href="/tietokannat/suunnittelu#tiedon-kuvailu" class="css-1j0udpt e1r4v4s10">Tiedon kuvailu</a></li><li class="css-1uvgd5 e18xy85f0"><a href="/tietokannat/suunnittelu#tietokantakaavio-database-diagram" class="css-1j0udpt e1r4v4s10">Tietokantakaavio (Database diagram)</a></li><li class="css-1uvgd5 e18xy85f0"><a href="/tietokannat/suunnittelu#sql-skeema-sql-schema" class="css-1j0udpt e1r4v4s10">SQL-skeema (SQL schema)</a></li><li class="css-1uvgd5 e18xy85f0"><a href="/tietokannat/suunnittelu#tietokannan-muuttaminen" class="css-1j0udpt e1r4v4s10">Tietokannan muuttaminen</a></li><li class="css-1uvgd5 e18xy85f0"><a href="/tietokannat/suunnittelu#muutosten-tekeminen" class="css-1j0udpt e1r4v4s10">Muutosten tekeminen</a></li><li class="css-1uvgd5 e18xy85f0"><a href="/tietokannat/suunnittelu#muutoksen-haasteet" class="css-1j0udpt e1r4v4s10">Muutoksen haasteet</a></li><li class="css-1uvgd5 e18xy85f0"><a href="/tietokannat/suunnittelu#migraatio-migration" class="css-1j0udpt e1r4v4s10">Migraatio (Migration)</a></li></ul></nav></aside><style data-emotion="css jl45xv">.css-jl45xv{text-align:center;position:absolute;bottom:0;width:100%;height:6rem;padding-top:10px;font-size:1rem;background:var(--theme-ui-colors-footer);color:var(--theme-ui-colors-text);}.css-jl45xv a{-webkit-text-decoration:none;text-decoration:none;color:var(--theme-ui-colors-background);}</style><footer class="css-jl45xv e1krdi8y0"><p>© <!-- -->2024<!-- -->, Julkaisija<a href="https://net.centria.fi/"> Centria</a></p><p>Lisää tietoa <a href="/tietokannat/lisenssi">Lisenssistä</a></p></footer></div></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/suunnittelu";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-0d51d282d68ddbc99621.js"],"app":["/app-5c8ce36b7ca7ddadeb9f.js"],"component---src-pages-404-js":["/component---src-pages-404-js-546f88170e8a99e0b45e.js"],"component---src-templates-docs-js":["/component---src-templates-docs-js-7a892bb90a0bfa08d7aa.js"]};/*]]>*/</script><script src="/tietokannat/polyfill-0d51d282d68ddbc99621.js" nomodule=""></script><script src="/tietokannat/component---src-templates-docs-js-7a892bb90a0bfa08d7aa.js" async=""></script><script src="/tietokannat/commons-18bdf9bc0a4174f228aa.js" async=""></script><script src="/tietokannat/app-5c8ce36b7ca7ddadeb9f.js" async=""></script><script src="/tietokannat/framework-d79a9ccabaa25efea902.js" async=""></script><script src="/tietokannat/webpack-runtime-3a0255c245ffc5167309.js" async=""></script></body></html>